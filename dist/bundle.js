!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i;n.r(e),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(i||(i={}));var r,o=function(){function t(t,e){this.owner=t,this.cardinal=e}return t.prototype.paint=function(e){e.fillStyle=c.color;var n=0,r=0;switch(this.cardinal){case i.NORTH:n=this.owner.x+this.owner.w/2,r=this.owner.y;break;case i.NORTH_EAST:n=this.owner.x+this.owner.w,r=this.owner.y;break;case i.EAST:n=this.owner.x+this.owner.w,r=this.owner.y+this.owner.h/2;break;case i.SOUTH_EAST:n=this.owner.x+this.owner.w,r=this.owner.y+this.owner.h;break;case i.SOUTH:n=this.owner.x+this.owner.w/2,r=this.owner.y+this.owner.h;break;case i.SOUTH_WEST:n=this.owner.x,r=this.owner.y+this.owner.h;break;case i.WEST:n=this.owner.x,r=this.owner.y+this.owner.h/2;break;case i.NORTH_WEST:n=this.owner.x,r=this.owner.y}e.fillRect(n-t.HSIZE,r-t.HSIZE,2*t.HSIZE,2*t.HSIZE)},t.HSIZE=4,t}(),s=function(){function t(){}return t.colorAsString=function(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")"},t}(),c=function(){function t(t,e){this.position=t,this.size=e,this.ctrlPoints=[],this.addControlPoints()}return t.prototype.paint=function(e){e.strokeStyle=t.color,e.beginPath(),e.rect(this.position.x,this.position.y,this.size.w,this.size.h),e.stroke(),this.ctrlPoints.forEach((function(t){return t.paint(e)}))},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.size.w},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.size.h},enumerable:!1,configurable:!0}),t.prototype.addControlPoints=function(){var t=this;Object.keys(i).map((function(e){var n=Number(e);isNaN(n)||t.ctrlPoints.push(new o(t,n))}))},t.color=s.colorAsString({r:28,g:116,b:232,a:255}),t}(),u=function(){function t(t,e){this.bbox=t,this.color=e,this._selected=!1}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!1,configurable:!0}),t.prototype.paint=function(t){this.doPaint(t),this.selected&&this.bbox.paint(t)},t}(),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){return t.call(this,e,n)||this}return h(e,t),e.prototype.doPaint=function(t){t.strokeStyle=s.colorAsString(this.color),t.beginPath(),t.moveTo(this.bbox.x,this.bbox.y),t.lineTo(this.bbox.x+this.bbox.w,this.bbox.y+this.bbox.h),t.stroke()},e}(u),f=function(){function t(){this.figures=[],this.modified=!1,this.name=null}return t.prototype.paint=function(t){this.figures.forEach((function(e){return e.paint(t)}))},t.prototype.addTestFigures=function(){var t=new a(new c({x:100,y:100},{w:400,h:100}),{r:255,g:0,b:0,a:255});this.figures.push(t);var e=new a(new c({x:100,y:100},{w:400,h:200}),{r:0,g:255,b:0,a:255});this.figures.push(e);var n=new a(new c({x:100,y:100},{w:400,h:300}),{r:0,g:0,b:0,a:255});this.figures.push(n)},t.prototype.selectAll=function(){this.figures.forEach((function(t){return t.selected=!0}))},t}(),l=function(){function t(){this.canvas=new p}return t.prototype.repaint=function(){this.canvas.repaint()},t}(),p=function(){function t(){this.htmlElement=document.createElement("canvas"),document.body.appendChild(this.htmlElement),this.htmlElement.width=t.PAGE_WIDTH,this.htmlElement.height=t.PAGE_HEIGHT,this.htmlElement.style.backgroundColor="#FAFAFA",this.ctx=this.htmlElement.getContext("2d")}return t.prototype.getContext=function(){return this.ctx},Object.defineProperty(t.prototype,"width",{get:function(){return this.htmlElement.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.htmlElement.height},enumerable:!1,configurable:!0}),t.prototype.repaint=function(){this.drawGrid(this.ctx),b.getInstance().paint(this.ctx)},t.prototype.clear=function(t){t.fillStyle="#FAFAFA",t.fillRect(0,0,this.width,this.height)},t.prototype.drawGrid=function(e){if(e){this.clear(e),e.lineWidth=1,e.strokeStyle=t.GRID_COLOR;for(var n=this.width/t.GRID_SIZE,i=this.height/t.GRID_SIZE,r=1;r<n;r++)e.beginPath(),e.moveTo(r*t.GRID_SIZE,0),e.lineTo(r*t.GRID_SIZE,t.PAGE_HEIGHT),e.stroke();for(var o=1;o<i;o++)e.beginPath(),e.moveTo(0,o*t.GRID_SIZE),e.lineTo(t.PAGE_WIDTH,o*t.GRID_SIZE),e.stroke()}},t.PAGE_WIDTH=2e3,t.PAGE_HEIGHT=2e3,t.GRID_SIZE=100,t.GRID_COLOR="#DDD0DD",t}(),b=function(){function t(){this.drawing=new f,this.mainWindow=new l,document.title="Graphics Editor v0.4"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.run=function(){this.drawing.addTestFigures(),this.drawing.selectAll(),this.repaint()},t.prototype.repaint=function(){this.mainWindow.repaint()},t.prototype.paint=function(t){this.drawing.paint(t)},t}(),y=b.getInstance();y.run();e.default=y}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2NvbnRyb2wtcG9pbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvY29sb3ItaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9ib3VuZC1ib3gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2ZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvbGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9tYWluLXdpbmRvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ2FyZGluYWwiLCJvd25lciIsImNhcmRpbmFsIiwicGFpbnQiLCJjdHgiLCJmaWxsU3R5bGUiLCJjb2xvciIsIngiLCJ5IiwidGhpcyIsIk5PUlRIIiwidyIsIk5PUlRIX0VBU1QiLCJFQVNUIiwiaCIsIlNPVVRIX0VBU1QiLCJTT1VUSCIsIlNPVVRIX1dFU1QiLCJXRVNUIiwiTk9SVEhfV0VTVCIsImZpbGxSZWN0IiwiQ29udHJvbFBvaW50IiwiSFNJWkUiLCJjb2xvckFzU3RyaW5nIiwiZyIsImIiLCJhIiwicG9zaXRpb24iLCJzaXplIiwiY3RybFBvaW50cyIsImFkZENvbnRyb2xQb2ludHMiLCJzdHJva2VTdHlsZSIsIkJvdW5kQm94IiwiYmVnaW5QYXRoIiwicmVjdCIsInN0cm9rZSIsImZvckVhY2giLCJjcCIsImtleXMiLCJtYXAiLCJOdW1iZXIiLCJpc05hTiIsInB1c2giLCJDb2xvckhlbHBlciIsImJib3giLCJfc2VsZWN0ZWQiLCJkb1BhaW50Iiwic2VsZWN0ZWQiLCJtb3ZlVG8iLCJsaW5lVG8iLCJGaWd1cmUiLCJmaWd1cmVzIiwibW9kaWZpZWQiLCJmIiwiYWRkVGVzdEZpZ3VyZXMiLCJyZWRMaW5lIiwiZ3JlZW5MaW5lIiwiYmxhY2tMaW5lIiwic2VsZWN0QWxsIiwiY2FudmFzIiwicmVwYWludCIsImh0bWxFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwid2lkdGgiLCJDYW52YXMiLCJQQUdFX1dJRFRIIiwiaGVpZ2h0IiwiUEFHRV9IRUlHSFQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImdldENvbnRleHQiLCJkcmF3R3JpZCIsImdldEluc3RhbmNlIiwiY2xlYXIiLCJsaW5lV2lkdGgiLCJHUklEX0NPTE9SIiwibnVtVmVydGljYWxzIiwiR1JJRF9TSVpFIiwibnVtSG9yaXpvbnRhbHMiLCJ2IiwiZHJhd2luZyIsIm1haW5XaW5kb3ciLCJNYWluV2luZG93IiwidGl0bGUiLCJBcHAiLCJpbnN0YW5jZSIsInJ1biIsImFwcCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVN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LFdBRWY1RSxFQUFJNkMsT0FDQWtCLEVBQU9DLFdBQ1B0RCxFQUFJcUQsRUFBT2EsV0FFZjVFLEVBQUkrQixXQWpHQSxFQUFBaUMsV0FBcUIsSUFDckIsRUFBQUUsWUFBc0IsSUFFdEIsRUFBQVUsVUFBb0IsSUFDcEIsRUFBQUYsV0FBcUIsVUFpR3pDLEVBMUdBLEdDaEJBLGFBTUksYUFDSXJFLEtBQUswRSxRQUFVLElBQUksRUFDbkIxRSxLQUFLMkUsV0FBYSxJQUFJQyxFQUV0QnZCLFNBQVN3QixNQUFRLHVCQXlDekIsT0FyQ1csRUFBQVgsWUFBUCxXQVFJLE9BUEtZLEVBQUlDLFdBSUxELEVBQUlDLFNBQVcsSUFBSUQsR0FHaEJBLEVBQUlDLFVBR2YsWUFBQUMsSUFBQSxXQUNJaEYsS0FBSzBFLFFBQ0E3QixpQkFHTDdDLEtBQUswRSxRQUNBekIsWUFFTGpELEtBQUttRCxXQUlULFlBQUFBLFFBQUEsV0FDSW5ELEtBQUsyRSxXQUNBeEIsV0FJVCxZQUFBekQsTUFBQSxTQUNJQyxHQUVBSyxLQUFLMEUsUUFDQWhGLE1BQ0dDLElBR2hCLEVBbkRBLEdDRk1zRixFQUFNLEVBQUlmLGNBQ2hCZSxFQUFJRCxNQUVXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IEdyYXBoaWNzT2JqZWN0IH0gZnJvbSAnLi9ncmFwaGljcy1vYmplY3QnO1xyXG5pbXBvcnQgeyBCb3VuZEJveCB9IGZyb20gJy4vYm91bmQtYm94JztcclxuXHJcbmV4cG9ydCBlbnVtIENhcmRpbmFsIHtcclxuICAgIE5PUlRILFxyXG4gICAgTk9SVEhfRUFTVCxcclxuICAgIEVBU1QsXHJcbiAgICBTT1VUSF9FQVNULFxyXG4gICAgU09VVEgsXHJcbiAgICBTT1VUSF9XRVNULFxyXG4gICAgV0VTVCxcclxuICAgIE5PUlRIX1dFU1RcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xQb2ludCBcclxuICAgIGltcGxlbWVudHMgR3JhcGhpY3NPYmplY3Qge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBIU0laRTogbnVtYmVyID0gNDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIG93bmVyOiBCb3VuZEJveCxcclxuICAgICAgICBwcml2YXRlIGNhcmRpbmFsOiBDYXJkaW5hbCApIHtcclxuICAgIH1cclxuXHJcbiAgICBwYWludCggXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBCb3VuZEJveC5jb2xvcjtcclxuXHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGxldCB5ID0gMDtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogY29tcGxldGUgc3dpdGNoXHJcblxyXG4gICAgICAgIHN3aXRjaCAoIHRoaXMuY2FyZGluYWwgKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEg6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54ICsgdGhpcy5vd25lci53IC8gMjtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5OT1JUSF9FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnkgKyB0aGlzLm93bmVyLmgvMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIX0VBU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54ICsgdGhpcy5vd25lci53O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudyAvIDI7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuU09VVEhfV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oLzI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5OT1JUSF9XRVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueDtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5maWxsUmVjdCggXHJcbiAgICAgICAgICAgIHggLSBDb250cm9sUG9pbnQuSFNJWkUsIHkgLSBDb250cm9sUG9pbnQuSFNJWkUsIFxyXG4gICAgICAgICAgICAyICogQ29udHJvbFBvaW50LkhTSVpFLCAyICogQ29udHJvbFBvaW50LkhTSVpFIFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBDb2xvciB7XG4gICAgcjogbnVtYmVyO1xuICAgIGc6IG51bWJlcjtcbiAgICBiOiBudW1iZXI7XG4gICAgYTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ29sb3JIZWxwZXIge1xuXG4gICAgc3RhdGljIGNvbG9yQXNTdHJpbmcoXG4gICAgICAgIGNvbG9yOiBDb2xvciApOiBzdHJpbmcge1xuXG4gICAgICAgIHJldHVybiAncmdiYSgnXG4gICAgICAgICAgICArIGNvbG9yLnJcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIGNvbG9yLmdcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIGNvbG9yLmJcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIChjb2xvci5hIC8gMjU1KVxuICAgICAgICAgICAgKyAnKSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWwsIENvbnRyb2xQb2ludCB9IGZyb20gJy4vY29udHJvbC1wb2ludCc7XHJcbmltcG9ydCB7IENvbG9ySGVscGVyIH0gZnJvbSAnLi4vdXRpbC9jb2xvci1oZWxwZXInO1xyXG5pbXBvcnQgeyBHcmFwaGljc09iamVjdCB9IGZyb20gJy4vZ3JhcGhpY3Mtb2JqZWN0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9zaXRpb24ge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERpbWVuc2lvbiB7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCb3VuZEJveCBcclxuICAgIGltcGxlbWVudHMgR3JhcGhpY3NPYmplY3Qge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBjb2xvcjogc3RyaW5nID0gQ29sb3JIZWxwZXIuY29sb3JBc1N0cmluZyh7XHJcbiAgICAgICAgcjogMjgsXHJcbiAgICAgICAgZzogMTE2LFxyXG4gICAgICAgIGI6IDIzMixcclxuICAgICAgICBhOiAyNTUsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBwdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHBvc2l0aW9uOiBQb3NpdGlvbixcclxuICAgICAgICBwcml2YXRlIHNpemU6IERpbWVuc2lvbiApIHtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb250cm9sUG9pbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyBkcmF3IGJvdW5kIGJveFxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IEJvdW5kQm94LmNvbG9yO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHgucmVjdCggXHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCwgdGhpcy5wb3NpdGlvbi55LCBcclxuICAgICAgICAgICAgdGhpcy5zaXplLncsICAgICB0aGlzLnNpemUuaCBcclxuICAgICAgICApO1xyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgLy8gZHJhdyBjb250cm9sIHBvaW50c1xyXG4gICAgICAgIHRoaXMuY3RybFBvaW50cy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGNwOiBDb250cm9sUG9pbnQpID0+IGNwLnBhaW50KCBjdHggKSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHcoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplLnc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplLmg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBcclxuICAgIHByaXZhdGUgY3RybFBvaW50czogQ29udHJvbFBvaW50W10gPSBbXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgYWRkQ29udHJvbFBvaW50cygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8gdGFyZ2V0ID0gRVMyMDE3K1xyXG4gICAgICAgIC8vIE9iamVjdC52YWx1ZXMoXHJcbiAgICAgICAgLy8gICAgIENhcmRpbmFsXHJcbiAgICAgICAgLy8gKVxyXG4gICAgICAgIC8vIC5tYXAoIChjYXJkaW5hbDogQ2FyZGluYWwpID0+XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY3RybFBvaW50c1xyXG4gICAgICAgIC8vICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgbmV3IENvbnRyb2xQb2ludChcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgY2FyZGluYWxcclxuICAgICAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAgICAgLy8gICAgICAgICApXHJcbiAgICAgICAgLy8gKTtcclxuXHJcbiAgICAgICAgLy8gdGFyZ2V0ID0gRVM1XHJcbiAgICAgICAgT2JqZWN0LmtleXMoXHJcbiAgICAgICAgICAgIENhcmRpbmFsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5tYXAoIChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkaW5hbDogbnVtYmVyID0gTnVtYmVyKCBcclxuICAgICAgICAgICAgICAgIGtleSBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggIWlzTmFOKCBjYXJkaW5hbCApICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHJsUG9pbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb250cm9sUG9pbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQm91bmRCb3ggfSBmcm9tICcuL2JvdW5kLWJveCc7XHJcbmltcG9ydCB7IENvbG9yIH0gZnJvbSAnLi4vdXRpbC9jb2xvci1oZWxwZXInO1xyXG5pbXBvcnQgeyBHcmFwaGljc09iamVjdCB9IGZyb20gJy4vZ3JhcGhpY3Mtb2JqZWN0JztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWd1cmUgXHJcbiAgICBpbXBsZW1lbnRzIEdyYXBoaWNzT2JqZWN0IHtcclxuXHJcbiAgICAvLyBwdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRvUGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJvdGVjdGVkIGJib3g6IEJvdW5kQm94LCAgICAgICAvLyBORVdcclxuICAgICAgICBwcm90ZWN0ZWQgY29sb3I6IENvbG9yICkge1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBzZWxlY3RlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IHNlbGVjdGVkKCBzOiBib29sZWFuICkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBUZW1wbGF0ZSBNZXRob2RcclxuICAgIHBhaW50KCBcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8gMS4gcGFpbnQgZmlndXJlXHJcbiAgICAgICAgdGhpcy5kb1BhaW50KFxyXG4gICAgICAgICAgICBjdHhcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyAyLiBwYWludCBib3VuZGluZyBib3hcclxuICAgICAgICBpZiAoIHRoaXMuc2VsZWN0ZWQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmJveFxyXG4gICAgICAgICAgICAgICAgLnBhaW50KFxyXG4gICAgICAgICAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcHJvdGVjdGVkIF9zZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcbiIsImltcG9ydCB7IFxuICAgIEJvdW5kQm94LCBcbn0gZnJvbSAnLi9ib3VuZC1ib3gnO1xuXG5pbXBvcnQgeyBcbiAgICBDb2xvcixcbiAgICBDb2xvckhlbHBlciwgXG59IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcblxuaW1wb3J0IHsgXG4gICAgRmlndXJlLFxufSBmcm9tICcuL2ZpZ3VyZSc7XG5cbmV4cG9ydCBjbGFzcyBMaW5lIFxuICAgIGV4dGVuZHMgRmlndXJlIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBiYm94OiBCb3VuZEJveCxcbiAgICAgICAgY29sb3I6IENvbG9yICkge1xuXG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgYmJveCxcbiAgICAgICAgICAgIGNvbG9yXG4gICAgICAgICk7XG4gICAgfVxuICAgICAgICBcbiAgICBwcm90ZWN0ZWQgZG9QYWludChcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gQ29sb3JIZWxwZXIuY29sb3JBc1N0cmluZyhcbiAgICAgICAgICAgIHRoaXMuY29sb3JcbiAgICAgICAgKTtcblxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oXG4gICAgICAgICAgICB0aGlzLmJib3gueCwgXG4gICAgICAgICAgICB0aGlzLmJib3gueVxuICAgICAgICApO1xuICAgICAgICBjdHgubGluZVRvKFxuICAgICAgICAgICAgdGhpcy5iYm94LnggKyB0aGlzLmJib3gudywgXG4gICAgICAgICAgICB0aGlzLmJib3gueSArIHRoaXMuYmJveC5oXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgXHJcbiAgICBCb3VuZEJveCwgXHJcbn0gZnJvbSAnLi9ib3VuZC1ib3gnO1xyXG5cclxuaW1wb3J0IHsgXHJcbiAgICBGaWd1cmUsIFxyXG59IGZyb20gJy4vZmlndXJlJztcclxuXHJcbmltcG9ydCB7IFxyXG4gICAgTGluZSBcclxufSBmcm9tICcuL2xpbmUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmcge1xyXG4gICAgcHJpdmF0ZSBmaWd1cmVzOiBGaWd1cmVbXSA9IFtcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBuYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwb2x5bW9ycGhpc20gaW4gYWN0aW9uXHJcbiAgICBwYWludChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5maWd1cmVzLmZvckVhY2goIFxyXG4gICAgICAgICAgICAoZjogRmlndXJlKSA9PiBmLnBhaW50KCBjdHggKSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IGRlbGV0ZSB0aGlzXHJcbiAgICBhZGRUZXN0RmlndXJlcygpOiB2b2lkIHsgICAgICAgICAgICAgICBcclxuICAgICAgICBjb25zdCByZWRMaW5lOiBMaW5lID0gbmV3IExpbmUoXHJcbiAgICAgICAgICAgIG5ldyBCb3VuZEJveCggeyB4OiAxMDAsIHk6IDEwMCB9LCB7IHc6IDQwMCwgaDogMTAwIH0gKSwgICAvLyBORVdcclxuICAgICAgICAgICAgeyByOiAyNTUsIGc6IDAsIGI6IDAsIGE6IDI1NSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmZpZ3VyZXNcclxuICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICByZWRMaW5lXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdyZWVuTGluZTogTGluZSA9IG5ldyBMaW5lKFxyXG4gICAgICAgICAgICBuZXcgQm91bmRCb3goIHsgeDogMTAwLCB5OiAxMDAgfSwgeyB3OiA0MDAsIGg6IDIwMCB9ICksICAgLy8gTkVXXHJcbiAgICAgICAgICAgIHsgcjogMCwgZzogMjU1LCBiOiAwLCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgZ3JlZW5MaW5lXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJsYWNrTGluZTogTGluZSA9IG5ldyBMaW5lKFxyXG4gICAgICAgICAgICBuZXcgQm91bmRCb3goIHsgeDogMTAwLCB5OiAxMDAgfSwgeyB3OiA0MDAsIGg6IDMwMCB9ICksICAgLy8gTkVXXHJcbiAgICAgICAgICAgIHsgcjogMCwgZzogMCwgYjogMCwgYTogMjU1IH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZmlndXJlc1xyXG4gICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgIGJsYWNrTGluZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5FV1xyXG4gICAgc2VsZWN0QWxsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmlndXJlcy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGY6IEZpZ3VyZSkgPT4gZi5zZWxlY3RlZCA9IHRydWUgXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBcclxuICAgIEFwcCBcclxufSBmcm9tICcuLi9jb250cm9sbGVyL2FwcCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpbldpbmRvdyB7XHJcbiAgICAvLyBwcml2YXRlIG1lbnU6IE1lbnVIZWxwZXI7XHJcbiAgICBwcml2YXRlIGNhbnZhczogQ2FudmFzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gbmV3IENhbnZhcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGFpbnQoKTogdm9pZCB7ICAgICAgICAgICAvLyBORVdcclxuICAgICAgICB0aGlzLmNhbnZhc1xyXG4gICAgICAgICAgICAucmVwYWludCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUgcHJpdmF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuY2xhc3MgQ2FudmFzIHtcclxuXHJcbiAgICBwcml2YXRlIGh0bWxFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBQQUdFX1dJRFRIOiBudW1iZXIgPSAyMDAwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFBBR0VfSEVJR0hUOiBudW1iZXIgPSAyMDAwO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBHUklEX1NJWkU6IG51bWJlciA9IDEwMDtcclxuICAgIHN0YXRpYyByZWFkb25seSBHUklEX0NPTE9SOiBzdHJpbmcgPSAnI0RERDBERCc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICdjYW52YXMnXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgIC5hcHBlbmRDaGlsZCggXHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxFbGVtZW50IFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LndpZHRoID0gQ2FudmFzLlBBR0VfV0lEVEg7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudC5oZWlnaHQgPSBDYW52YXMuUEFHRV9IRUlHSFQ7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZBRkFGQSc7XHJcblxyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5odG1sRWxlbWVudFxyXG4gICAgICAgICAgICAuZ2V0Q29udGV4dChcclxuICAgICAgICAgICAgICAgICcyZCdcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5odG1sRWxlbWVudC53aWR0aDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50LmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXBhaW50KCk6IHZvaWQgeyAgICAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgdGhpcy5kcmF3R3JpZChcclxuICAgICAgICAgICAgdGhpcy5jdHhcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBBcHAuZ2V0SW5zdGFuY2UoKVxyXG4gICAgICAgICAgICAucGFpbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyKFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZBRkFGQSc7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KCAwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd0dyaWQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsICk6IHZvaWQge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiAoIGN0eCApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcihcclxuICAgICAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IENhbnZhcy5HUklEX0NPTE9SO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogdXNlIGRvY3VtZW50IHNpemVcclxuICAgICAgICAgICAgY29uc3QgbnVtVmVydGljYWxzOiBudW1iZXIgPSB0aGlzLndpZHRoIC8gQ2FudmFzLkdSSURfU0laRTtcclxuICAgICAgICAgICAgY29uc3QgbnVtSG9yaXpvbnRhbHM6IG51bWJlciA9IHRoaXMuaGVpZ2h0IC8gQ2FudmFzLkdSSURfU0laRTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZlcnRpY2Fsc1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgdjogbnVtYmVyID0gMTsgdiA8IG51bVZlcnRpY2FsczsgdisrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgdiAqIENhbnZhcy5HUklEX1NJWkUsIFxyXG4gICAgICAgICAgICAgICAgICAgIDAgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICB2ICogQ2FudmFzLkdSSURfU0laRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgQ2FudmFzLlBBR0VfSEVJR0hUIFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaG9yaXpvbnRhbHNcclxuICAgICAgICAgICAgZm9yICggbGV0IGg6IG51bWJlciA9IDE7IGggPCBudW1Ib3Jpem9udGFsczsgaCsrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICBDYW52YXMuUEFHRV9XSURUSCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyYXdpbmcgfSBmcm9tICcuLi9tb2RlbC9kcmF3aW5nJztcclxuaW1wb3J0IHsgTWFpbldpbmRvdyB9IGZyb20gJy4uL3ZpZXcvbWFpbi13aW5kb3cnO1xyXG5cclxuLy8gU2luZ2xldG9uID0+IEltbXV0YWJsZVxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBcHA7XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3aW5nOiBEcmF3aW5nO1xyXG4gICAgcHJpdmF0ZSBtYWluV2luZG93OiBNYWluV2luZG93O1xyXG4gICAgXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZHJhd2luZyA9IG5ldyBEcmF3aW5nKCk7XHJcbiAgICAgICAgdGhpcy5tYWluV2luZG93ID0gbmV3IE1haW5XaW5kb3coKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnR3JhcGhpY3MgRWRpdG9yIHYwLjQnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxhenkgaW5pdGlhbGl6YXRpb24gKHByZWZlcnJlZClcclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBcHAge1xyXG4gICAgICAgIGlmICggQXBwLmluc3RhbmNlICkge1xyXG4gICAgICAgICAgICAvLyBOT09QXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBBcHAuaW5zdGFuY2UgPSBuZXcgQXBwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gQXBwLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRyYXdpbmcgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmVcclxuICAgICAgICAgICAgLmFkZFRlc3RGaWd1cmVzKCk7XHJcblxyXG4gICAgICAgIC8vIE5FV1xyXG4gICAgICAgIHRoaXMuZHJhd2luZyAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZVxyXG4gICAgICAgICAgICAuc2VsZWN0QWxsKCk7XHJcblxyXG4gICAgICAgIHRoaXMucmVwYWludCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZyb20gbW9kZWwgdG8gdmlldyBcclxuICAgIHJlcGFpbnQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5tYWluV2luZG93XHJcbiAgICAgICAgICAgIC5yZXBhaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnJvbSB2aWV3IHRvIG1vZGVsXHJcbiAgICBwYWludChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5kcmF3aW5nXHJcbiAgICAgICAgICAgIC5wYWludChcclxuICAgICAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJy4vY29udHJvbGxlci9hcHAnO1xyXG5cclxuY29uc3QgYXBwID0gQXBwLmdldEluc3RhbmNlKCk7XHJcbmFwcC5ydW4oKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwcDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==