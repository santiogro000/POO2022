!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i;n.r(e),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(i||(i={}));var r,o=function(){function t(t,e){this.owner=t,this.cardinal=e}return t.prototype.paint=function(e){e.fillStyle=c.color;var n=0,r=0;switch(this.cardinal){case i.NORTH:n=this.owner.x+this.owner.w/2,r=this.owner.y;break;case i.NORTH_EAST:n=this.owner.x+this.owner.w,r=this.owner.y;break;case i.EAST:n=this.owner.x+this.owner.w,r=this.owner.y+this.owner.h/2;break;case i.SOUTH_EAST:n=this.owner.x+this.owner.w,r=this.owner.y+this.owner.h;break;case i.SOUTH:n=this.owner.x+this.owner.w/2,r=this.owner.y+this.owner.h;break;case i.SOUTH_WEST:n=this.owner.x,r=this.owner.y+this.owner.h;break;case i.WEST:n=this.owner.x,r=this.owner.y+this.owner.h/2;break;case i.NORTH_WEST:n=this.owner.x,r=this.owner.y}e.fillRect(n-t.HSIZE,r-t.HSIZE,2*t.HSIZE,2*t.HSIZE)},t.HSIZE=4,t}(),s=function(){function t(){}return t.colorAsString=function(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")"},t}(),c=function(){function t(t,e){this.position=t,this.size=e,this.ctrlPoints=[],this.addControlPoints()}return t.prototype.paint=function(e){e.strokeStyle=t.color,e.beginPath(),e.rect(this.position.x,this.position.y,this.size.w,this.size.h),e.stroke(),this.ctrlPoints.forEach((function(t){return t.paint(e)}))},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.size.w},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.size.h},enumerable:!1,configurable:!0}),t.prototype.addControlPoints=function(){var t=this;Object.keys(i).map((function(e){var n=Number(e);isNaN(n)||t.ctrlPoints.push(new o(t,n))}))},t.color=s.colorAsString({r:28,g:116,b:232,a:255}),t}(),u=function(){function t(t,e){this.bbox=t,this.color=e,this._selected=!1}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!1,configurable:!0}),t}(),h=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(e,n){return t.call(this,e,n)||this}return h(e,t),e.prototype.paint=function(t){t.strokeStyle=s.colorAsString(this.color),t.beginPath(),t.moveTo(this.bbox.x,this.bbox.y),t.lineTo(this.bbox.x+this.bbox.w,this.bbox.y+this.bbox.h),t.stroke(),this.selected&&this.bbox.paint(t)},e}(u),f=function(){function t(){this.figures=[],this.modified=!1,this.name=null}return t.prototype.paint=function(t){this.figures.forEach((function(e){return e.paint(t)}))},t.prototype.addTestFigures=function(){var t=new a(new c({x:100,y:100},{w:400,h:100}),{r:255,g:0,b:0,a:255});this.figures.push(t);var e=new a(new c({x:100,y:100},{w:400,h:200}),{r:0,g:255,b:0,a:255});this.figures.push(e);var n=new a(new c({x:100,y:100},{w:400,h:300}),{r:0,g:0,b:0,a:255});this.figures.push(n)},t.prototype.selectAll=function(){this.figures.forEach((function(t){return t.selected=!t.selected}))},t}(),l=function(){function t(){this.canvas=new p}return t.prototype.getContext=function(){return this.canvas.getContext()},t.prototype.repaint=function(){this.canvas.repaint()},t}(),p=function(){function t(){this.htmlElement=document.createElement("canvas"),document.body.appendChild(this.htmlElement),this.htmlElement.width=t.PAGE_WIDTH,this.htmlElement.height=t.PAGE_HEIGHT,this.htmlElement.style.backgroundColor="#FAFAFA",this.ctx=this.htmlElement.getContext("2d")}return t.prototype.getContext=function(){return this.ctx},Object.defineProperty(t.prototype,"width",{get:function(){return this.htmlElement.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.htmlElement.height},enumerable:!1,configurable:!0}),t.prototype.repaint=function(){this.drawGrid(this.ctx),b.getInstance().paint(this.ctx)},t.prototype.clear=function(t){t.fillStyle="#FAFAFA",t.fillRect(0,0,this.width,this.height)},t.prototype.drawGrid=function(e){if(e){this.clear(e),e.lineWidth=1,e.strokeStyle=t.GRID_COLOR;for(var n=this.width/t.GRID_SIZE,i=this.height/t.GRID_SIZE,r=1;r<n;r++)e.beginPath(),e.moveTo(r*t.GRID_SIZE,0),e.lineTo(r*t.GRID_SIZE,t.PAGE_HEIGHT),e.stroke();for(var o=1;o<i;o++)e.beginPath(),e.moveTo(0,o*t.GRID_SIZE),e.lineTo(t.PAGE_WIDTH,o*t.GRID_SIZE),e.stroke()}},t.PAGE_WIDTH=2e3,t.PAGE_HEIGHT=2e3,t.GRID_SIZE=100,t.GRID_COLOR="#DDD0DD",t}(),b=function(){function t(){this.drawing=new f,this.mainWindow=new l,document.title="Graphics Editor v0.3"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getContext=function(){return this.mainWindow.getContext()},t.prototype.run=function(){this.drawing.addTestFigures(),this.drawing.selectAll(),this.repaint()},t.prototype.repaint=function(){this.mainWindow.repaint()},t.prototype.paint=function(t){this.drawing.paint(t)},t}(),y=b.getInstance();y.run();e.default=y}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2NvbnRyb2wtcG9pbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvY29sb3ItaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9ib3VuZC1ib3gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2ZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvbGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9tYWluLXdpbmRvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ2FyZGluYWwiLCJvd25lciIsImNhcmRpbmFsIiwicGFpbnQiLCJjdHgiLCJmaWxsU3R5bGUiLCJjb2xvciIsIngiLCJ5IiwidGhpcyIsIk5PUlRIIiwidyIsIk5PUlRIX0VBU1QiLCJFQVNUIiwiaCIsIlNPVVRIX0VBU1QiLCJTT1VUSCIsIlNPVVRIX1dFU1QiLCJXRVNUIiwiTk9SVEhfV0VTVCIsImZpbGxSZWN0IiwiQ29udHJvbFBvaW50IiwiSFNJWkUiLCJjb2xvckFzU3RyaW5nIiwiZyIsImIiLCJhIiwicG9zaXRpb24iLCJzaXplIiwiY3RybFBvaW50cyIsImFkZENvbnRyb2xQb2ludHMiLCJzdHJva2VTdHlsZSIsIkJvdW5kQm94IiwiYmVnaW5QYXRoIiwicmVjdCIsInN0cm9rZSIsImZvckVhY2giLCJjcCIsImtleXMiLCJtYXAiLCJOdW1iZXIiLCJpc05hTiIsInB1c2giLCJDb2xvckhlbHBlciIsImJib3giLCJfc2VsZWN0ZWQiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzZWxlY3RlZCIsIkZpZ3VyZSIsImZpZ3VyZXMiLCJtb2RpZmllZCIsImYiLCJhZGRUZXN0RmlndXJlcyIsInJlZExpbmUiLCJncmVlbkxpbmUiLCJibGFja0xpbmUiLCJzZWxlY3RBbGwiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwicmVwYWludCIsImh0bWxFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwid2lkdGgiLCJDYW52YXMiLCJQQUdFX1dJRFRIIiwiaGVpZ2h0IiwiUEFHRV9IRUlHSFQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImRyYXdHcmlkIiwiZ2V0SW5zdGFuY2UiLCJjbGVhciIsImxpbmVXaWR0aCIsIkdSSURfQ09MT1IiLCJudW1WZXJ0aWNhbHMiLCJHUklEX1NJWkUiLCJudW1Ib3Jpem9udGFscyIsInYiLCJkcmF3aW5nIiwibWFpbldpbmRvdyIsIk1haW5XaW5kb3ciLCJ0aXRsZSIsIkFwcCIsImluc3RhbmNlIiwicnVuIiwiYXBwIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFB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M0UsRUFBSTJDLE9BQ0FvQixFQUFPQyxXQUNQdEQsRUFBSXFELEVBQU9ZLFdBRWYzRSxFQUFJK0IsV0FqR0EsRUFBQWlDLFdBQXFCLElBQ3JCLEVBQUFFLFlBQXNCLElBRXRCLEVBQUFTLFVBQW9CLElBQ3BCLEVBQUFGLFdBQXFCLFVBaUd6QyxFQTFHQSxHQ3BCQSxhQU1JLGFBQ0lwRSxLQUFLeUUsUUFBVSxJQUFJLEVBQ25CekUsS0FBSzBFLFdBQWEsSUFBSUMsRUFFdEJ0QixTQUFTdUIsTUFBUSx1QkE4Q3pCLE9BMUNXLEVBQUFYLFlBQVAsV0FRSSxPQVBLWSxFQUFJQyxXQUlMRCxFQUFJQyxTQUFXLElBQUlELEdBR2hCQSxFQUFJQyxVQUdmLFlBQUE1QixXQUFBLFdBQ0ksT0FBT2xELEtBQUswRSxXQUNQeEIsY0FHVCxZQUFBNkIsSUFBQSxXQUNJL0UsS0FBS3lFLFFBQ0E3QixpQkFHTDVDLEtBQUt5RSxRQUNBekIsWUFFTGhELEtBQUttRCxXQUlULFlBQUFBLFFBQUEsV0FDSW5ELEtBQUswRSxXQUNBdkIsV0FJVCxZQUFBekQsTUFBQSxTQUNJQyxHQUVBSyxLQUFLeUUsUUFDQS9FLE1BQ0dDLElBR2hCLEVBeERBLEdDRk1xRixFQUFNLEVBQUlmLGNBQ2hCZSxFQUFJRCxNQUVXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IEdyYXBoaWNzT2JqZWN0IH0gZnJvbSAnLi9ncmFwaGljcy1vYmplY3QnO1xyXG5pbXBvcnQgeyBCb3VuZEJveCB9IGZyb20gJy4vYm91bmQtYm94JztcclxuXHJcbmV4cG9ydCBlbnVtIENhcmRpbmFsIHtcclxuICAgIE5PUlRILFxyXG4gICAgTk9SVEhfRUFTVCxcclxuICAgIEVBU1QsXHJcbiAgICBTT1VUSF9FQVNULFxyXG4gICAgU09VVEgsXHJcbiAgICBTT1VUSF9XRVNULFxyXG4gICAgV0VTVCxcclxuICAgIE5PUlRIX1dFU1RcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xQb2ludCBcclxuICAgIGltcGxlbWVudHMgR3JhcGhpY3NPYmplY3Qge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBIU0laRTogbnVtYmVyID0gNDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIG93bmVyOiBCb3VuZEJveCxcclxuICAgICAgICBwcml2YXRlIGNhcmRpbmFsOiBDYXJkaW5hbCApIHtcclxuICAgIH1cclxuXHJcbiAgICBwYWludCggXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBCb3VuZEJveC5jb2xvcjtcclxuXHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGxldCB5ID0gMDtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogY29tcGxldGUgc3dpdGNoIC0tIENPTVBMRVRFRFxyXG5cclxuICAgICAgICBzd2l0Y2ggKCB0aGlzLmNhcmRpbmFsICkge1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLk5PUlRIOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudyAvIDI7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEhfRUFTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLnc7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuRUFTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLnc7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oLzI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5TT1VUSF9FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnkgKyB0aGlzLm93bmVyLmg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5TT1VUSDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLncgLyAyO1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIX1dFU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLldFU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaC8yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEhfV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguZmlsbFJlY3QoIFxyXG4gICAgICAgICAgICB4IC0gQ29udHJvbFBvaW50LkhTSVpFLCB5IC0gQ29udHJvbFBvaW50LkhTSVpFLCBcclxuICAgICAgICAgICAgMiAqIENvbnRyb2xQb2ludC5IU0laRSwgMiAqIENvbnRyb2xQb2ludC5IU0laRSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ29sb3Ige1xuICAgIHI6IG51bWJlcjtcbiAgICBnOiBudW1iZXI7XG4gICAgYjogbnVtYmVyO1xuICAgIGE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvbG9ySGVscGVyIHtcblxuICAgIHN0YXRpYyBjb2xvckFzU3RyaW5nKFxuICAgICAgICBjb2xvcjogQ29sb3IgKTogc3RyaW5nIHtcblxuICAgICAgICByZXR1cm4gJ3JnYmEoJ1xuICAgICAgICAgICAgKyBjb2xvci5yXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyBjb2xvci5nXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyBjb2xvci5iXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyAoY29sb3IuYSAvIDI1NSlcbiAgICAgICAgICAgICsgJyknO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENhcmRpbmFsLCBDb250cm9sUG9pbnQgfSBmcm9tICcuL2NvbnRyb2wtcG9pbnQnO1xyXG5pbXBvcnQgeyBDb2xvckhlbHBlciB9IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcclxuaW1wb3J0IHsgR3JhcGhpY3NPYmplY3QgfSBmcm9tICcuL2dyYXBoaWNzLW9iamVjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvc2l0aW9uIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24ge1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQm91bmRCb3ggXHJcbiAgICBpbXBsZW1lbnRzIEdyYXBoaWNzT2JqZWN0IHtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgY29sb3I6IHN0cmluZyA9IENvbG9ySGVscGVyLmNvbG9yQXNTdHJpbmcoe1xyXG4gICAgICAgIHI6IDI4LFxyXG4gICAgICAgIGc6IDExNixcclxuICAgICAgICBiOiAyMzIsXHJcbiAgICAgICAgYTogMjU1LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcHVibGljIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBwb3NpdGlvbjogUG9zaXRpb24sXHJcbiAgICAgICAgcHJpdmF0ZSBzaXplOiBEaW1lbnNpb24gKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29udHJvbFBvaW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhaW50KCBcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8gZHJhdyBib3VuZCBib3hcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBCb3VuZEJveC5jb2xvcjtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LnJlY3QoIFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgXHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZS53LCAgICAgdGhpcy5zaXplLmggXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIC8vIGRyYXcgY29udHJvbCBwb2ludHNcclxuICAgICAgICB0aGlzLmN0cmxQb2ludHMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChjcDogQ29udHJvbFBvaW50KSA9PiBjcC5wYWludCggY3R4ICkgXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi55O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZS53O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZS5oO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG5vbi1wdWJsaWMgbWVtYmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgXHJcbiAgICBwcml2YXRlIGN0cmxQb2ludHM6IENvbnRyb2xQb2ludFtdID0gW1xyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIGFkZENvbnRyb2xQb2ludHMoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIC8vIHRhcmdldCA9IEVTMjAxNytcclxuICAgICAgICAvLyBPYmplY3QudmFsdWVzKFxyXG4gICAgICAgIC8vICAgICBDYXJkaW5hbFxyXG4gICAgICAgIC8vIClcclxuICAgICAgICAvLyAubWFwKCAoY2FyZGluYWw6IENhcmRpbmFsKSA9PlxyXG4gICAgICAgIC8vICAgICB0aGlzLmN0cmxQb2ludHNcclxuICAgICAgICAvLyAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIG5ldyBDb250cm9sUG9pbnQoXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNhcmRpbmFsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgKVxyXG4gICAgICAgIC8vICAgICAgICAgKVxyXG4gICAgICAgIC8vICk7XHJcblxyXG4gICAgICAgIC8vIHRhcmdldCA9IEVTNVxyXG4gICAgICAgIE9iamVjdC5rZXlzKFxyXG4gICAgICAgICAgICBDYXJkaW5hbFxyXG4gICAgICAgIClcclxuICAgICAgICAubWFwKCAoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FyZGluYWw6IG51bWJlciA9IE51bWJlciggXHJcbiAgICAgICAgICAgICAgICBrZXkgXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBpZiAoICFpc05hTiggY2FyZGluYWwgKSApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3RybFBvaW50c1xyXG4gICAgICAgICAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ29udHJvbFBvaW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRpbmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJvdW5kQm94IH0gZnJvbSAnLi9ib3VuZC1ib3gnO1xyXG5pbXBvcnQgeyBDb2xvciB9IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcclxuaW1wb3J0IHsgR3JhcGhpY3NPYmplY3QgfSBmcm9tICcuL2dyYXBoaWNzLW9iamVjdCc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRmlndXJlIFxyXG4gICAgaW1wbGVtZW50cyBHcmFwaGljc09iamVjdCB7XHJcblxyXG4gICAgLy8gcHVibGljIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBcclxuICAgIGFic3RyYWN0IHBhaW50KCBcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByb3RlY3RlZCBiYm94OiBCb3VuZEJveCwgICAgICAgLy8gTkVXXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbG9yOiBDb2xvciApIHtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgc2VsZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBzZWxlY3RlZCggczogYm9vbGVhbiApIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZCA9IHM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgcHJvdGVjdGVkIF9zZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG59XHJcbiIsImltcG9ydCB7IFxuICAgIEJvdW5kQm94LCBcbn0gZnJvbSAnLi9ib3VuZC1ib3gnO1xuXG5pbXBvcnQgeyBcbiAgICBDb2xvcixcbiAgICBDb2xvckhlbHBlciwgXG59IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcblxuaW1wb3J0IHsgXG4gICAgRmlndXJlLFxufSBmcm9tICcuL2ZpZ3VyZSc7XG5cbmV4cG9ydCBjbGFzcyBMaW5lIFxuICAgIGV4dGVuZHMgRmlndXJlIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBiYm94OiBCb3VuZEJveCxcbiAgICAgICAgY29sb3I6IENvbG9yICkge1xuXG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgYmJveCxcbiAgICAgICAgICAgIGNvbG9yXG4gICAgICAgICk7XG4gICAgfVxuICAgICAgICBcbiAgICBwYWludChcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gQ29sb3JIZWxwZXIuY29sb3JBc1N0cmluZyhcbiAgICAgICAgICAgIHRoaXMuY29sb3JcbiAgICAgICAgKTtcblxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oXG4gICAgICAgICAgICB0aGlzLmJib3gueCwgXG4gICAgICAgICAgICB0aGlzLmJib3gueVxuICAgICAgICApO1xuICAgICAgICBjdHgubGluZVRvKFxuICAgICAgICAgICAgdGhpcy5iYm94LnggKyB0aGlzLmJib3gudywgXG4gICAgICAgICAgICB0aGlzLmJib3gueSArIHRoaXMuYmJveC5oXG4gICAgICAgICk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgICAvLyBORVdcbiAgICAgICAgaWYgKCB0aGlzLnNlbGVjdGVkICkge1xuICAgICAgICAgICAgdGhpcy5iYm94XG4gICAgICAgICAgICAgICAgLnBhaW50KFxuICAgICAgICAgICAgICAgICAgICBjdHhcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IFxyXG4gICAgQm91bmRCb3gsIFxyXG59IGZyb20gJy4vYm91bmQtYm94JztcclxuXHJcbmltcG9ydCB7IFxyXG4gICAgRmlndXJlLCBcclxufSBmcm9tICcuL2ZpZ3VyZSc7XHJcblxyXG5pbXBvcnQgeyBcclxuICAgIExpbmUgXHJcbn0gZnJvbSAnLi9saW5lJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEcmF3aW5nIHtcclxuICAgIHByaXZhdGUgZmlndXJlczogRmlndXJlW10gPSBbXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgbW9kaWZpZWQgPSBmYWxzZTtcclxuICAgIHByaXZhdGUgbmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcG9seW1vcnBoaXNtIGluIGFjdGlvblxyXG4gICAgcGFpbnQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuZmlndXJlcy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGY6IEZpZ3VyZSkgPT4gZi5wYWludCggY3R4ICkgXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPOiBkZWxldGUgdGhpc1xyXG4gICAgYWRkVGVzdEZpZ3VyZXMoKTogdm9pZCB7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgY29uc3QgcmVkTGluZTogTGluZSA9IG5ldyBMaW5lKFxyXG4gICAgICAgICAgICBuZXcgQm91bmRCb3goIHsgeDogMTAwLCB5OiAxMDAgfSwgeyB3OiA0MDAsIGg6IDEwMCB9ICksICAgLy8gTkVXXHJcbiAgICAgICAgICAgIHsgcjogMjU1LCBnOiAwLCBiOiAwLCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgcmVkTGluZVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBncmVlbkxpbmU6IExpbmUgPSBuZXcgTGluZShcclxuICAgICAgICAgICAgbmV3IEJvdW5kQm94KCB7IHg6IDEwMCwgeTogMTAwIH0sIHsgdzogNDAwLCBoOiAyMDAgfSApLCAgIC8vIE5FV1xyXG4gICAgICAgICAgICB7IHI6IDAsIGc6IDI1NSwgYjogMCwgYTogMjU1IH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZmlndXJlc1xyXG4gICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgIGdyZWVuTGluZVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBibGFja0xpbmU6IExpbmUgPSBuZXcgTGluZShcclxuICAgICAgICAgICAgbmV3IEJvdW5kQm94KCB7IHg6IDEwMCwgeTogMTAwIH0sIHsgdzogNDAwLCBoOiAzMDAgfSApLCAgIC8vIE5FV1xyXG4gICAgICAgICAgICB7IHI6IDAsIGc6IDAsIGI6IDAsIGE6IDI1NSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmZpZ3VyZXNcclxuICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICBibGFja0xpbmVcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBORVdcclxuICAgIHNlbGVjdEFsbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpZ3VyZXMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChmOiBGaWd1cmUpID0+IGYuc2VsZWN0ZWQgPSAhZi5zZWxlY3RlZCBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFxyXG4gICAgQXBwIFxyXG59IGZyb20gJy4uL2NvbnRyb2xsZXIvYXBwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYWluV2luZG93IHtcclxuICAgIC8vIHByaXZhdGUgbWVudTogTWVudUhlbHBlcjtcclxuICAgIHByaXZhdGUgY2FudmFzOiBDYW52YXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKCk7XHJcbiAgICB9XHJcbiAgICBnZXRDb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzXHJcbiAgICAgICAgICAgIC5nZXRDb250ZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwYWludCgpOiB2b2lkIHsgICAgICAgICAgIC8vIE5FV1xyXG4gICAgICAgIHRoaXMuY2FudmFzXHJcbiAgICAgICAgICAgIC5yZXBhaW50KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIG1vZHVsZSBwcml2YXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5jbGFzcyBDYW52YXMge1xyXG5cclxuICAgIHByaXZhdGUgaHRtbEVsZW1lbnQ6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGw7XHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IFBBR0VfV0lEVEg6IG51bWJlciA9IDIwMDA7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgUEFHRV9IRUlHSFQ6IG51bWJlciA9IDIwMDA7XHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdSSURfU0laRTogbnVtYmVyID0gMTAwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdSSURfQ09MT1I6IHN0cmluZyA9ICcjREREMEREJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgJ2NhbnZhcydcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAgICAgLmFwcGVuZENoaWxkKCBcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbEVsZW1lbnQgXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQud2lkdGggPSBDYW52YXMuUEFHRV9XSURUSDtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmhlaWdodCA9IENhbnZhcy5QQUdFX0hFSUdIVDtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkFGQUZBJztcclxuXHJcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmh0bWxFbGVtZW50XHJcbiAgICAgICAgICAgIC5nZXRDb250ZXh0KFxyXG4gICAgICAgICAgICAgICAgJzJkJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50LndpZHRoO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHRtbEVsZW1lbnQuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGFpbnQoKTogdm9pZCB7ICAgICAgICAgICAvLyBORVdcclxuICAgICAgICB0aGlzLmRyYXdHcmlkKFxyXG4gICAgICAgICAgICB0aGlzLmN0eFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIEFwcC5nZXRJbnN0YW5jZSgpXHJcbiAgICAgICAgICAgIC5wYWludChcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXIoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkFGQUZBJztcclxuICAgICAgICBjdHguZmlsbFJlY3QoIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3R3JpZChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGlmICggY3R4ICkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKFxyXG4gICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gQ2FudmFzLkdSSURfQ09MT1I7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB1c2UgZG9jdW1lbnQgc2l6ZVxyXG4gICAgICAgICAgICBjb25zdCBudW1WZXJ0aWNhbHM6IG51bWJlciA9IHRoaXMud2lkdGggLyBDYW52YXMuR1JJRF9TSVpFO1xyXG4gICAgICAgICAgICBjb25zdCBudW1Ib3Jpem9udGFsczogbnVtYmVyID0gdGhpcy5oZWlnaHQgLyBDYW52YXMuR1JJRF9TSVpFO1xyXG5cclxuICAgICAgICAgICAgLy8gdmVydGljYWxzXHJcbiAgICAgICAgICAgIGZvciAoIGxldCB2OiBudW1iZXIgPSAxOyB2IDwgbnVtVmVydGljYWxzOyB2KysgKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKCBcclxuICAgICAgICAgICAgICAgICAgICB2ICogQ2FudmFzLkdSSURfU0laRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgMCBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgIHYgKiBDYW52YXMuR1JJRF9TSVpFLCBcclxuICAgICAgICAgICAgICAgICAgICBDYW52YXMuUEFHRV9IRUlHSFQgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBob3Jpem9udGFsc1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaDogbnVtYmVyID0gMTsgaCA8IG51bUhvcml6b250YWxzOyBoKysgKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKCBcclxuICAgICAgICAgICAgICAgICAgICAwLCBcclxuICAgICAgICAgICAgICAgICAgICBoICogQ2FudmFzLkdSSURfU0laRSBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgIENhbnZhcy5QQUdFX1dJRFRILCBcclxuICAgICAgICAgICAgICAgICAgICBoICogQ2FudmFzLkdSSURfU0laRSBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRHJhd2luZyB9IGZyb20gJy4uL21vZGVsL2RyYXdpbmcnO1xyXG5pbXBvcnQgeyBNYWluV2luZG93IH0gZnJvbSAnLi4vdmlldy9tYWluLXdpbmRvdyc7XHJcblxyXG4vLyBTaW5nbGV0b24gPT4gSW1tdXRhYmxlXHJcbmV4cG9ydCBjbGFzcyBBcHAge1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IEFwcDtcclxuXHJcbiAgICBwcml2YXRlIGRyYXdpbmc6IERyYXdpbmc7XHJcbiAgICBwcml2YXRlIG1haW5XaW5kb3c6IE1haW5XaW5kb3c7XHJcbiAgICBcclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nID0gbmV3IERyYXdpbmcoKTtcclxuICAgICAgICB0aGlzLm1haW5XaW5kb3cgPSBuZXcgTWFpbldpbmRvdygpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9ICdHcmFwaGljcyBFZGl0b3IgdjAuMyc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbGF6eSBpbml0aWFsaXphdGlvbiAocHJlZmVycmVkKVxyXG4gICAgc3RhdGljIGdldEluc3RhbmNlKCk6IEFwcCB7XHJcbiAgICAgICAgaWYgKCBBcHAuaW5zdGFuY2UgKSB7XHJcbiAgICAgICAgICAgIC8vIE5PT1BcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIEFwcC5pbnN0YW5jZSA9IG5ldyBBcHAoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBBcHAuaW5zdGFuY2U7XHJcbiAgICBcclxuICAgIH1cclxuICAgIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYWluV2luZG93XHJcbiAgICAgICAgICAgIC5nZXRDb250ZXh0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcnVuKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZHJhd2luZyAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZVxyXG4gICAgICAgICAgICAuYWRkVGVzdEZpZ3VyZXMoKTtcclxuXHJcbiAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgdGhpcy5kcmF3aW5nICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlXHJcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBhaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnJvbSBtb2RlbCB0byB2aWV3IFxyXG4gICAgcmVwYWludCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1haW5XaW5kb3dcclxuICAgICAgICAgICAgLnJlcGFpbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmcm9tIHZpZXcgdG8gbW9kZWxcclxuICAgIHBhaW50KFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmRyYXdpbmdcclxuICAgICAgICAgICAgLnBhaW50KFxyXG4gICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9jb250cm9sbGVyL2FwcCc7XHJcblxyXG5jb25zdCBhcHAgPSBBcHAuZ2V0SW5zdGFuY2UoKTtcclxuYXBwLnJ1bigpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9