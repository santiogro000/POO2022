!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o;n.r(e),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(o||(o={}));var i,r=function(){function t(t,e){this.owner=t,this.cardinal=e}return t.prototype.paint=function(e){e.fillStyle=c.color;var n=0,i=0;switch(this.cardinal){case o.NORTH:n=this.owner.x+this.owner.w/2,i=this.owner.y;break;case o.NORTH_EAST:n=this.owner.x+this.owner.w,i=this.owner.y;break;case o.EAST:n=this.owner.x+this.owner.w,i=this.owner.y+this.owner.h/2;break;case o.SOUTH_EAST:n=this.owner.x+this.owner.w,i=this.owner.y+this.owner.h;break;case o.SOUTH:n=this.owner.x+this.owner.w/2,i=this.owner.y+this.owner.h;break;case o.SOUTH_WEST:n=this.owner.x,i=this.owner.y+this.owner.h;break;case o.WEST:n=this.owner.x,i=this.owner.y+this.owner.h/2;break;case o.NORTH_WEST:n=this.owner.x,i=this.owner.y}e.fillRect(n-t.HSIZE,i-t.HSIZE,2*t.HSIZE,2*t.HSIZE)},t.HSIZE=4,t}(),s=function(){function t(){}return t.colorAsString=function(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")"},t}(),c=function(){function t(t,e){this.position=t,this.size=e,this.ctrlPoints=[],this.addControlPoints()}return t.prototype.paint=function(e){e.save(),e.setLineDash([5,5]),e.strokeStyle=t.color,e.beginPath(),e.rect(this.position.x,this.position.y,this.size.w,this.size.h),e.stroke(),e.restore(),this.ctrlPoints.forEach((function(t){return t.paint(e)}))},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.size.w},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.size.h},enumerable:!1,configurable:!0}),t.prototype.select=function(t,e){return e?this.contained(t,e):this.contains(t)},t.prototype.addControlPoints=function(){var t=this;Object.keys(o).map((function(e){var n=Number(e);isNaN(n)||t.ctrlPoints.push(new r(t,n))}))},t.prototype.contains=function(t){var e=this.x,n=this.x+this.w,o=this.y,i=this.y+this.h;return e<t.clientX&&t.clientX<n&&o<t.clientY&&t.clientY<i},t.prototype.contained=function(t,e){return!1},t.color=s.colorAsString({r:28,g:116,b:232,a:255}),t}(),u=function(){function t(t,e){this.bbox=t,this.color=e,this._selected=!1}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!1,configurable:!0}),t.prototype.paint=function(t){t.save(),t.strokeStyle=s.colorAsString(this.color),this.doPaint(t),t.restore(),this.selected&&this.bbox.paint(t)},t.prototype.select=function(t,e){this.selected=this.bbox.select(t,e)},t}(),h=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.doPaint=function(t){var e="Hello world sweet world in this October 18th";t.fillStyle=t.strokeStyle;var n=t.measureText(e);t.textBaseline="hanging",t.font="48px serif",n.actualBoundingBoxAscent,t.fillText(e,this.bbox.x,this.bbox.h)},e}(u),p=function(){function t(){this.figures=[],this.modified=!1,this.name=null}return t.prototype.paint=function(t){this.figures.forEach((function(e){return e.paint(t)}))},t.prototype.addTestFigures=function(){var t=new a(new c({x:100,y:100},{w:400,h:100}),{r:255,g:0,b:0,a:255});this.figures.push(t);var e=new a(new c({x:100,y:100},{w:400,h:200}),{r:0,g:255,b:0,a:255});this.figures.push(e);var n=new a(new c({x:100,y:100},{w:400,h:300}),{r:0,g:0,b:0,a:255});this.figures.push(n)},t.prototype.select=function(t,e){this.figures.forEach((function(n){return n.select(t,e)})),E.repaint()},t}(),l=function(){function t(){}return t.prototype.onMouseDown=function(t){this.evDown=t},t.prototype.onMouseUp=function(t){this.evUp=t,this.processMouseUp()},t.prototype.equal=function(t,e){return t.clientX===e.clientX&&t.clientY===e.clientY},t}(),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.processMouseUp=function(){this.equal(this.evDown,this.evUp)?E.select(this.evUp):E.select(this.evDown,this.evUp)},e}(l),d=function(){function t(){this.canvas=new w}return t.prototype.init=function(){this.canvas.init()},t.prototype.repaint=function(){this.canvas.repaint()},t}(),w=function(){function t(){this.tools=[],this.htmlElement=document.createElement("canvas"),document.body.appendChild(this.htmlElement),this.htmlElement.width=t.PAGE_WIDTH,this.htmlElement.height=t.PAGE_HEIGHT,this.htmlElement.style.backgroundColor="#FAFAFA",this.ctx=this.htmlElement.getContext("2d")}return t.prototype.init=function(){this.buildTools(),this.setActiveTool(t.SELECTION),window.addEventListener("mousedown",this.handleMouseDown.bind(this)),window.addEventListener("mouseup",this.handleMouseUp.bind(this))},t.prototype.setActiveTool=function(t){this.activeTool=this.tools[t]},t.prototype.getContext=function(){return this.ctx},Object.defineProperty(t.prototype,"width",{get:function(){return this.htmlElement.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.htmlElement.height},enumerable:!1,configurable:!0}),t.prototype.repaint=function(){this.drawGrid(this.ctx),b.getInstance().paint(this.ctx)},t.prototype.clear=function(t){t.fillStyle="#FAFAFA",t.fillRect(0,0,this.width,this.height)},t.prototype.drawGrid=function(e){if(e){this.clear(e),e.lineWidth=1,e.strokeStyle=t.GRID_COLOR;for(var n=this.width/t.GRID_SIZE,o=this.height/t.GRID_SIZE,i=1;i<n;i++)e.beginPath(),e.moveTo(i*t.GRID_SIZE,0),e.lineTo(i*t.GRID_SIZE,t.PAGE_HEIGHT),e.stroke();for(var r=1;r<o;r++)e.beginPath(),e.moveTo(0,r*t.GRID_SIZE),e.lineTo(t.PAGE_WIDTH,r*t.GRID_SIZE),e.stroke()}},t.prototype.buildTools=function(){this.tools[t.SELECTION]=new y},t.prototype.handleMouseDown=function(t){this.activeTool.onMouseDown(t)},t.prototype.handleMouseUp=function(t){this.activeTool.onMouseUp(t)},t.LINE_CREATION=0,t.RECT_CREATION=1,t.ELLI_CREATION=2,t.TEXT_CREATION=3,t.SELECTION=4,t.PAGE_WIDTH=2e3,t.PAGE_HEIGHT=2e3,t.GRID_SIZE=100,t.GRID_COLOR="#DDD0DD",t}(),b=function(){function t(){this.drawing=new p,this.mainWindow=new d,document.title="Graphics Editor v0.6"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.run=function(){this.drawing.addTestFigures(),this.mainWindow.init(),this.repaint()},t.prototype.repaint=function(){this.mainWindow.repaint()},t.prototype.paint=function(t){this.drawing.paint(t)},t.prototype.select=function(t,e){this.drawing.select(t,e)},t}(),T=b.getInstance();T.run();var E=e.default=T}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2NvbnRyb2wtcG9pbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvY29sb3ItaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9ib3VuZC1ib3gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2ZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvdGV4dC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3NlbGVjdGlvbi10b29sLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L21haW4td2luZG93LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDYXJkaW5hbCIsIm93bmVyIiwiY2FyZGluYWwiLCJwYWludCIsImN0eCIsImZpbGxTdHlsZSIsImNvbG9yIiwieCIsInkiLCJ0aGlzIiwiTk9SVEgiLCJ3IiwiTk9SVEhfRUFTVCIsIkVBU1QiLCJoIiwiU09VVEhfRUFTVCIsIlNPVVRIIiwiU09VVEhfV0VTVCIsIldFU1QiLCJOT1JUSF9XRVNUIiwiZmlsbFJlY3QiLCJDb250cm9sUG9pbnQiLCJIU0laRSIsImNvbG9yQXNTdHJpbmciLCJnIiwiYiIsImEiLCJwb3NpdGlvbiIsInNpemUiLCJjdHJsUG9pbnRzIiwiYWRkQ29udHJvbFBvaW50cyIsInNhdmUiLCJzZXRMaW5lRGFzaCIsInN0cm9rZVN0eWxlIiwiQm91bmRCb3giLCJiZWdpblBhdGgiLCJyZWN0Iiwic3Ryb2tlIiwicmVzdG9yZSIsImZvckVhY2giLCJjcCIsInNlbGVjdCIsImV2RG93biIsImV2VXAiLCJjb250YWluZWQiLCJjb250YWlucyIsImtleXMiLCJtYXAiLCJOdW1iZXIiLCJpc05hTiIsInB1c2giLCJldiIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNsaWVudFgiLCJjbGllbnRZIiwiQ29sb3JIZWxwZXIiLCJiYm94IiwiX3NlbGVjdGVkIiwiZG9QYWludCIsInNlbGVjdGVkIiwidGV4dCIsImxlbmdodFRleHQiLCJtZWFzdXJlVGV4dCIsInRleHRCYXNlbGluZSIsImZvbnQiLCJhY3R1YWxCb3VuZGluZ0JveEFzY2VudCIsImZpbGxUZXh0IiwiZmlndXJlcyIsIm1vZGlmaWVkIiwiZiIsImFkZFRlc3RGaWd1cmVzIiwicmVkVGV4dCIsIlRleHQiLCJncmVlblRleHQiLCJibGFja1RleHQiLCJyZXBhaW50Iiwib25Nb3VzZURvd24iLCJvbk1vdXNlVXAiLCJwcm9jZXNzTW91c2VVcCIsImVxdWFsIiwiZXYxIiwiZXYyIiwiVG9vbCIsImNhbnZhcyIsImluaXQiLCJ0b29scyIsImh0bWxFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwid2lkdGgiLCJDYW52YXMiLCJQQUdFX1dJRFRIIiwiaGVpZ2h0IiwiUEFHRV9IRUlHSFQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImdldENvbnRleHQiLCJidWlsZFRvb2xzIiwic2V0QWN0aXZlVG9vbCIsIlNFTEVDVElPTiIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVNb3VzZURvd24iLCJoYW5kbGVNb3VzZVVwIiwiYWN0aXZlVG9vbCIsImRyYXdHcmlkIiwiZ2V0SW5zdGFuY2UiLCJjbGVhciIsImxpbmVXaWR0aCIsIkdSSURfQ09MT1IiLCJudW1WZXJ0aWNhbHMiLCJHUklEX1NJWkUiLCJudW1Ib3Jpem9udGFscyIsInYiLCJtb3ZlVG8iLCJsaW5lVG8iLCJMSU5FX0NSRUFUSU9OIiwiUkVDVF9DUkVBVElPTiIsIkVMTElfQ1JFQVRJT04iLCJURVhUX0NSRUFUSU9OIiwiZHJhd2luZyIsIm1haW5XaW5kb3ciLCJNYWluV2luZG93IiwidGl0bGUiLCJBcHAiLCJpbnN0YW5jZSIsInJ1biIsImFwcCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxh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TVIsWUFBQWlFLFdBQVIsV0FPSTdGLEtBQUsrRSxNQUFPTyxFQUFPUyxXQUFjLElBQUksR0FJakMsWUFBQUcsZ0JBQVIsU0FDSXhELEdBRUExQyxLQUFLb0csV0FDQTlCLFlBQ0c1QixJQUtKLFlBQUF5RCxjQUFSLFNBQ0l6RCxHQUVBMUMsS0FBS29HLFdBQ0E3QixVQUNHN0IsSUFqTEksRUFBQXNFLGNBQXdCLEVBQ3hCLEVBQUFDLGNBQXdCLEVBQ3hCLEVBQUFDLGNBQXdCLEVBQ3hCLEVBQUFDLGNBQXdCLEVBQ3hCLEVBQUFwQixVQUF3QixFQU94QixFQUFBUixXQUFxQixJQUNyQixFQUFBRSxZQUFzQixJQUV0QixFQUFBa0IsVUFBb0IsSUFDcEIsRUFBQUYsV0FBcUIsVUFxS3pDLEVBekxBLEdDekJBLGFBTUksYUFDSXpHLEtBQUtvSCxRQUFVLElBQUksRUFDbkJwSCxLQUFLcUgsV0FBYSxJQUFJQyxFQUV0QnJDLFNBQVNzQyxNQUFRLHVCQW9EekIsT0FoRFcsRUFBQWpCLFlBQVAsV0FRSSxPQVBLa0IsRUFBSUMsV0FJTEQsRUFBSUMsU0FBVyxJQUFJRCxHQUdoQkEsRUFBSUMsVUFHZixZQUFBQyxJQUFBLFdBQ0kxSCxLQUFLb0gsUUFDQXBELGlCQUVMaEUsS0FBS3FILFdBQ0F2QyxPQUVMOUUsS0FBS3FFLFdBSVQsWUFBQUEsUUFBQSxXQUNJckUsS0FBS3FILFdBQ0FoRCxXQUlULFlBQUEzRSxNQUFBLFNBQ0lDLEdBRUFLLEtBQUtvSCxRQUNBMUgsTUFDR0MsSUFLWixZQUFBcUMsT0FBQSxTQUNJQyxFQUNBQyxHQUVBbEMsS0FBS29ILFFBQ0FwRixPQUNHQyxFQUNBQyxJQUdoQixFQTlEQSxHQ0ZNeUYsRUFBTSxFQUFJckIsY0FDaEJxQixFQUFJRCxNQUVXIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IEdyYXBoaWNzT2JqZWN0IH0gZnJvbSAnLi9ncmFwaGljcy1vYmplY3QnO1xyXG5pbXBvcnQgeyBCb3VuZEJveCB9IGZyb20gJy4vYm91bmQtYm94JztcclxuXHJcbmV4cG9ydCBlbnVtIENhcmRpbmFsIHtcclxuICAgIE5PUlRILFxyXG4gICAgTk9SVEhfRUFTVCxcclxuICAgIEVBU1QsXHJcbiAgICBTT1VUSF9FQVNULFxyXG4gICAgU09VVEgsXHJcbiAgICBTT1VUSF9XRVNULFxyXG4gICAgV0VTVCxcclxuICAgIE5PUlRIX1dFU1RcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xQb2ludCBcclxuICAgIGltcGxlbWVudHMgR3JhcGhpY3NPYmplY3Qge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBIU0laRTogbnVtYmVyID0gNDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIG93bmVyOiBCb3VuZEJveCxcclxuICAgICAgICBwcml2YXRlIGNhcmRpbmFsOiBDYXJkaW5hbCApIHtcclxuICAgIH1cclxuXHJcbiAgICBwYWludCggXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBCb3VuZEJveC5jb2xvcjtcclxuXHJcbiAgICAgICAgbGV0IHggPSAwO1xyXG4gICAgICAgIGxldCB5ID0gMDtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogY29tcGxldGUgc3dpdGNoXHJcblxyXG4gICAgICAgIHN3aXRjaCAoIHRoaXMuY2FyZGluYWwgKSB7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEg6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54ICsgdGhpcy5vd25lci53IC8gMjtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5OT1JUSF9FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnkgKyB0aGlzLm93bmVyLmgvMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIX0VBU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54ICsgdGhpcy5vd25lci53O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudyAvIDI7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuU09VVEhfV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oLzI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5OT1JUSF9XRVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueDtcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5maWxsUmVjdCggXHJcbiAgICAgICAgICAgIHggLSBDb250cm9sUG9pbnQuSFNJWkUsIHkgLSBDb250cm9sUG9pbnQuSFNJWkUsIFxyXG4gICAgICAgICAgICAyICogQ29udHJvbFBvaW50LkhTSVpFLCAyICogQ29udHJvbFBvaW50LkhTSVpFIFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBDb2xvciB7XG4gICAgcjogbnVtYmVyO1xuICAgIGc6IG51bWJlcjtcbiAgICBiOiBudW1iZXI7XG4gICAgYTogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ29sb3JIZWxwZXIge1xuXG4gICAgc3RhdGljIGNvbG9yQXNTdHJpbmcoXG4gICAgICAgIGNvbG9yOiBDb2xvciApOiBzdHJpbmcge1xuXG4gICAgICAgIHJldHVybiAncmdiYSgnXG4gICAgICAgICAgICArIGNvbG9yLnJcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIGNvbG9yLmdcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIGNvbG9yLmJcbiAgICAgICAgICAgICsgJywnXG4gICAgICAgICAgICArIChjb2xvci5hIC8gMjU1KVxuICAgICAgICAgICAgKyAnKSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWwsIENvbnRyb2xQb2ludCB9IGZyb20gJy4vY29udHJvbC1wb2ludCc7XHJcbmltcG9ydCB7IENvbG9ySGVscGVyIH0gZnJvbSAnLi4vdXRpbC9jb2xvci1oZWxwZXInO1xyXG5pbXBvcnQgeyBHcmFwaGljc09iamVjdCB9IGZyb20gJy4vZ3JhcGhpY3Mtb2JqZWN0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUG9zaXRpb24ge1xyXG4gICAgeDogbnVtYmVyO1xyXG4gICAgeTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERpbWVuc2lvbiB7XHJcbiAgICB3OiBudW1iZXI7XHJcbiAgICBoOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCb3VuZEJveCBcclxuICAgIGltcGxlbWVudHMgR3JhcGhpY3NPYmplY3Qge1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBjb2xvcjogc3RyaW5nID0gQ29sb3JIZWxwZXIuY29sb3JBc1N0cmluZyh7XHJcbiAgICAgICAgcjogMjgsXHJcbiAgICAgICAgZzogMTE2LFxyXG4gICAgICAgIGI6IDIzMixcclxuICAgICAgICBhOiAyNTUsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBwdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIHBvc2l0aW9uOiBQb3NpdGlvbixcclxuICAgICAgICBwcml2YXRlIHNpemU6IERpbWVuc2lvbiApIHtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb250cm9sUG9pbnRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyBkcmF3IGJvdW5kIGJveFxyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgY3R4LnNldExpbmVEYXNoKFs1LCA1XSk7XHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gQm91bmRCb3guY29sb3I7XHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGN0eC5yZWN0KCBcclxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54LCB0aGlzLnBvc2l0aW9uLnksIFxyXG4gICAgICAgICAgICB0aGlzLnNpemUudywgICAgIHRoaXMuc2l6ZS5oIFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgIC8vIGRyYXcgY29udHJvbCBwb2ludHNcclxuICAgICAgICB0aGlzLmN0cmxQb2ludHMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChjcDogQ29udHJvbFBvaW50KSA9PiBjcC5wYWludCggY3R4ICkgXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLng7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi55O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB3KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZS53O1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBoKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZS5oO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE5FV1xyXG4gICAgc2VsZWN0KFxyXG4gICAgICAgIGV2RG93bjogTW91c2VFdmVudCxcclxuICAgICAgICBldlVwPzogTW91c2VFdmVudCApOiBib29sZWFuIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgaWYgKCBldlVwICkge1xyXG4gICAgICAgICAgICAvLyBib3VuZCBib3ggc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lZChcclxuICAgICAgICAgICAgICAgIGV2RG93biwgZXZVcFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcG9pbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnMoXHJcbiAgICAgICAgICAgIGV2RG93blxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBcclxuICAgIHByaXZhdGUgY3RybFBvaW50czogQ29udHJvbFBvaW50W10gPSBbXHJcbiAgICBdO1xyXG5cclxuICAgIHByaXZhdGUgYWRkQ29udHJvbFBvaW50cygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8gdGFyZ2V0ID0gRVMyMDE3K1xyXG4gICAgICAgIC8vIE9iamVjdC52YWx1ZXMoXHJcbiAgICAgICAgLy8gICAgIENhcmRpbmFsXHJcbiAgICAgICAgLy8gKVxyXG4gICAgICAgIC8vIC5tYXAoIChjYXJkaW5hbDogQ2FyZGluYWwpID0+XHJcbiAgICAgICAgLy8gICAgIHRoaXMuY3RybFBvaW50c1xyXG4gICAgICAgIC8vICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgbmV3IENvbnRyb2xQb2ludChcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcyxcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgY2FyZGluYWxcclxuICAgICAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAgICAgLy8gICAgICAgICApXHJcbiAgICAgICAgLy8gKTtcclxuXHJcbiAgICAgICAgLy8gdGFyZ2V0ID0gRVM1XHJcbiAgICAgICAgT2JqZWN0LmtleXMoXHJcbiAgICAgICAgICAgIENhcmRpbmFsXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5tYXAoIChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkaW5hbDogbnVtYmVyID0gTnVtYmVyKCBcclxuICAgICAgICAgICAgICAgIGtleSBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICggIWlzTmFOKCBjYXJkaW5hbCApICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHJsUG9pbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb250cm9sUG9pbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZGluYWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb250YWlucyhcclxuICAgICAgICBldjogTW91c2VFdmVudCApOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgY29uc3QgbGVmdDogICBudW1iZXIgPSB0aGlzLng7XHJcbiAgICAgICAgY29uc3QgcmlnaHQ6ICBudW1iZXIgPSB0aGlzLnggKyB0aGlzLnc7XHJcbiAgICAgICAgY29uc3QgdG9wOiAgICBudW1iZXIgPSB0aGlzLnk7XHJcbiAgICAgICAgY29uc3QgYm90dG9tOiBudW1iZXIgPSB0aGlzLnkgKyB0aGlzLmg7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICByZXR1cm4gbGVmdCA8IGV2LmNsaWVudFggJiYgZXYuY2xpZW50WCA8IHJpZ2h0XHJcbiAgICAgICAgICAgICYmIHRvcCA8IGV2LmNsaWVudFkgJiYgZXYuY2xpZW50WSA8IGJvdHRvbTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUT0RPXHJcbiAgICBwcml2YXRlIGNvbnRhaW5lZChcclxuICAgICAgICBldkRvd246IE1vdXNlRXZlbnQsXHJcbiAgICAgICAgZXZVcDogTW91c2VFdmVudCApOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJvdW5kQm94IH0gZnJvbSAnLi9ib3VuZC1ib3gnO1xyXG5pbXBvcnQgeyBDb2xvcixDb2xvckhlbHBlciB9IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcclxuaW1wb3J0IHsgR3JhcGhpY3NPYmplY3QgfSBmcm9tICcuL2dyYXBoaWNzLW9iamVjdCc7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRmlndXJlIFxyXG4gICAgaW1wbGVtZW50cyBHcmFwaGljc09iamVjdCB7XHJcblxyXG4gICAgLy8gcHVibGljIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBkb1BhaW50KCBcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByb3RlY3RlZCBiYm94OiBCb3VuZEJveCwgICAgICAgLy8gTkVXXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbG9yOiBDb2xvciApIHtcclxuICAgIH07XHJcbiAgICBwcm90ZWN0ZWQgX3NlbGVjdGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gICAgZ2V0IHNlbGVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcclxuICAgIH07XHJcblxyXG4gICAgc2V0IHNlbGVjdGVkKCBzOiBib29sZWFuICkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkID0gcztcclxuXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIFRlbXBsYXRlIE1ldGhvZFxyXG4gICAgcGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDEuIFNhdmVzIGN1cnJlbnQgc3RhdGUgb2YgY3R4XHJcbiAgICAgICAgY3R4LnNhdmUoKTtcclxuXHJcbiAgICAgICAgLy8gMi4gU2V0cyBDb2xvclxyXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IENvbG9ySGVscGVyLmNvbG9yQXNTdHJpbmcoICBcclxuICAgICAgICAgICAgdGhpcy5jb2xvclxyXG4gICAgICAgICk7IFxyXG5cclxuICAgICAgICAvLyAzLiBQYWludHMgZmlndXJlXHJcbiAgICAgICAgdGhpcy5kb1BhaW50KFxyXG4gICAgICAgICAgICBjdHhcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIDMuIFJlc3RvcmVzIHN0YXRlIG9mIGN0eFxyXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgICAgIC8vIDQuIFBhaW50IGJvdW5kaW5nIGJveCAoaWYgYXBsaWNhYmxlKVxyXG4gICAgICAgIGlmICggdGhpcy5zZWxlY3RlZCApIHtcclxuICAgICAgICAgICAgdGhpcy5iYm94XHJcbiAgICAgICAgICAgICAgICAucGFpbnQoXHJcbiAgICAgICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyBORVdcclxuICAgIHNlbGVjdCggXHJcbiAgICAgICAgZXZEb3duOiBNb3VzZUV2ZW50LFxyXG4gICAgICAgIGV2VXA/OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLmJib3hcclxuICAgICAgICAgICAgLnNlbGVjdCggXHJcbiAgICAgICAgICAgICAgICBldkRvd24sIFxyXG4gICAgICAgICAgICAgICAgZXZVcCBcclxuICAgICAgICAgICAgKTtcclxuICAgIC8vIG5vbi1wdWJsaWMgbWVtYmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFxyXG4gICAgQ29sb3IsXHJcbiAgICBDb2xvckhlbHBlciwgXHJcbn0gZnJvbSAnLi4vdXRpbC9jb2xvci1oZWxwZXInO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEZpZ3VyZSxcclxufSBmcm9tICcuL2ZpZ3VyZSc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRcclxuICAgIGV4dGVuZHMgRmlndXJlIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgZG9QYWludChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBcIkhlbGxvIHdvcmxkIHN3ZWV0IHdvcmxkIGluIHRoaXMgT2N0b2JlciAxOHRoXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcclxuICAgICAgICBjb25zdCBsZW5naHRUZXh0ID0gY3R4Lm1lYXN1cmVUZXh0KHRleHQpO1xyXG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSBcImhhbmdpbmdcIjtcclxuICAgICAgICBjdHguZm9udCA9ICc0OHB4IHNlcmlmJztcclxuICAgICAgICBsZW5naHRUZXh0LmFjdHVhbEJvdW5kaW5nQm94QXNjZW50O1xyXG4gICAgICAgIGN0eC5maWxsVGV4dCh0ZXh0LCAodGhpcy5iYm94LngpLCAodGhpcy5iYm94LmgpKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBhcHAgZnJvbSAnLi4vaW5kZXgnO1xyXG5cclxuaW1wb3J0IHsgXHJcbiAgICBCb3VuZEJveCwgXHJcbn0gZnJvbSAnLi9ib3VuZC1ib3gnO1xyXG5cclxuaW1wb3J0IHsgXHJcbiAgICBGaWd1cmUsIFxyXG59IGZyb20gJy4vZmlndXJlJztcclxuXHJcbmltcG9ydCB7IFxyXG4gICAgTGluZSBcclxufSBmcm9tICcuL2xpbmUnO1xyXG5pbXBvcnQgeyBcclxuICAgIFJlY3RhbmdsZSBcclxufSBmcm9tICcuL3JlY3RhbmdsZSc7XHJcbmltcG9ydCB7IFxyXG4gICAgRWxsaXBzZSBcclxufSBmcm9tICcuL2VsbGlwc2UnO1xyXG5pbXBvcnQgeyBcclxuICAgIFRleHQgXHJcbn0gZnJvbSAnLi90ZXh0JztcclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRHJhd2luZyB7XHJcbiAgICBwcml2YXRlIGZpZ3VyZXM6IEZpZ3VyZVtdID0gW1xyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHBvbHltb3JwaGlzbSBpbiBhY3Rpb25cclxuICAgIHBhaW50KFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmZpZ3VyZXMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChmOiBGaWd1cmUpID0+IGYucGFpbnQoIGN0eCApIFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETzogZGVsZXRlIHRoaXNcclxuICAgIGFkZFRlc3RGaWd1cmVzKCk6IHZvaWQgeyAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IHJlZFRleHQ6IFRleHQgPSBuZXcgVGV4dChcclxuICAgICAgICAgICAgbmV3IEJvdW5kQm94KCB7IHg6IDEwMCwgeTogMTAwIH0sIHsgdzogNDAwLCBoOiAxMDAgfSApLCAgIC8vIE5FV1xyXG4gICAgICAgICAgICB7IHI6IDI1NSwgZzogMCwgYjogMCwgYTogMjU1IH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZmlndXJlc1xyXG4gICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgIHJlZFRleHRcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZ3JlZW5UZXh0OiBUZXh0ID0gbmV3IFRleHQoXHJcbiAgICAgICAgICAgIG5ldyBCb3VuZEJveCggeyB4OiAxMDAsIHk6IDEwMCB9LCB7IHc6IDQwMCwgaDogMjAwIH0gKSwgICAvLyBORVdcclxuICAgICAgICAgICAgeyByOiAwLCBnOiAyNTUsIGI6IDAsIGE6IDI1NSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmZpZ3VyZXNcclxuICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICBncmVlblRleHRcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgYmxhY2tUZXh0OiBUZXh0ID0gbmV3IFRleHQoXHJcbiAgICAgICAgICAgIG5ldyBCb3VuZEJveCggeyB4OiAxMDAsIHk6IDEwMCB9LCB7IHc6IDQwMCwgaDogMzAwIH0gKSwgICAvLyBORVdcclxuICAgICAgICAgICAgeyByOiAwLCBnOiAwLCBiOiAwLCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgYmxhY2tUZXh0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyogc2VsZWN0QWxsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmlndXJlcy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGY6IEZpZ3VyZSkgPT4gZi5zZWxlY3RlZCA9IHRydWUgXHJcbiAgICAgICAgKTtcclxuICAgIH0gKi9cclxuXHJcbiAgICAvLyBORVdcclxuICAgIHNlbGVjdCggXHJcbiAgICAgICAgZXZEb3duOiBNb3VzZUV2ZW50LFxyXG4gICAgICAgIGV2VXA/OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZmlndXJlcy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGY6IEZpZ3VyZSkgPT4gZi5zZWxlY3QoIGV2RG93biwgZXZVcCApIFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IHNvbWV0aGluZyBzZWxlY3RlZD9cclxuICAgICAgICBhcHAucmVwYWludCgpO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUb29sIHtcclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IHByb2Nlc3NNb3VzZVVwKCk6IHZvaWQ7XHJcblxyXG4gICAgcHJvdGVjdGVkIGV2RG93bjogTW91c2VFdmVudDtcclxuICAgIHByb3RlY3RlZCBldlVwOiAgIE1vdXNlRXZlbnQ7XHJcblxyXG4gICAgb25Nb3VzZURvd24oXHJcbiAgICAgICAgZXY6IE1vdXNlRXZlbnQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuZXZEb3duID0gZXY7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGVtcGxhdGUgTWV0aG9kXHJcbiAgICBvbk1vdXNlVXAoXHJcbiAgICAgICAgZXY6IE1vdXNlRXZlbnQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIC8vIDEuIHNhdmUgZXZlbnRcclxuICAgICAgICB0aGlzLmV2VXAgPSBldjtcclxuXHJcbiAgICAgICAgLy8gMi4gZG8gc29tZXRoaW5nIHcvIHRoZSBldmVudHNcclxuICAgICAgICB0aGlzLnByb2Nlc3NNb3VzZVVwKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHByb3RlY3RlZCBlcXVhbChcclxuICAgICAgICBldjE6IE1vdXNlRXZlbnQsXHJcbiAgICAgICAgZXYyOiBNb3VzZUV2ZW50ICk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICByZXR1cm4gZXYxLmNsaWVudFggPT09IGV2Mi5jbGllbnRYIFxyXG4gICAgICAgICAgICAmJiBldjEuY2xpZW50WSA9PT0gZXYyLmNsaWVudFk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJztcclxuXHJcbmltcG9ydCBhcHAgZnJvbSAnLi4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbGVjdGlvblRvb2wgXHJcbiAgICBleHRlbmRzIFRvb2wge1xyXG5cclxuICAgIHByb3RlY3RlZCBwcm9jZXNzTW91c2VVcCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIHRoaXMuZXF1YWwoIHRoaXMuZXZEb3duLCB0aGlzLmV2VXAgKSApIHtcclxuICAgICAgICAgICAgLy8gcG9pbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIGFwcC5zZWxlY3QoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2VXBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGJvdW5kIGJveCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgYXBwLnNlbGVjdChcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZEb3duLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ldlVwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgXHJcbiAgICBBcHAgXHJcbn0gZnJvbSAnLi4vY29udHJvbGxlci9hcHAnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1haW5XaW5kb3cge1xyXG4gICAgLy8gcHJpdmF0ZSBtZW51OiBNZW51SGVscGVyO1xyXG4gICAgcHJpdmF0ZSBjYW52YXM6IENhbnZhcztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBORVdcclxuICAgIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jYW52YXNcclxuICAgICAgICAgICAgLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXBhaW50KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FudmFzXHJcbiAgICAgICAgICAgIC5yZXBhaW50KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIG1vZHVsZSBwcml2YXRlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5pbXBvcnQgeyBUb29sIH0gZnJvbSAnLi90b29sJztcclxuaW1wb3J0IHsgU2VsZWN0aW9uVG9vbCB9IGZyb20gJy4vc2VsZWN0aW9uLXRvb2wnO1xyXG5cclxuY2xhc3MgQ2FudmFzIHtcclxuXHJcbiAgICBwcml2YXRlIGh0bWxFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBMSU5FX0NSRUFUSU9OOiBudW1iZXIgPSAwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFJFQ1RfQ1JFQVRJT046IG51bWJlciA9IDE7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgRUxMSV9DUkVBVElPTjogbnVtYmVyID0gMjtcclxuICAgIHN0YXRpYyByZWFkb25seSBURVhUX0NSRUFUSU9OOiBudW1iZXIgPSAzO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFNFTEVDVElPTjogICAgIG51bWJlciA9IDQ7XHJcbiAgICAvLyBORVcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHByaXZhdGUgdG9vbHM6IFRvb2xbXSA9IFtcclxuICAgIF07XHJcbiAgICBwcml2YXRlIGFjdGl2ZVRvb2w6IFRvb2w7XHJcbiAgICAvLyBORVcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgUEFHRV9XSURUSDogbnVtYmVyID0gMjAwMDtcclxuICAgIHN0YXRpYyByZWFkb25seSBQQUdFX0hFSUdIVDogbnVtYmVyID0gMjAwMDtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgR1JJRF9TSVpFOiBudW1iZXIgPSAxMDA7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgR1JJRF9DT0xPUjogc3RyaW5nID0gJyNEREQwREQnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxyXG4gICAgICAgICAgICAnY2FudmFzJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keVxyXG4gICAgICAgICAgICAuYXBwZW5kQ2hpbGQoIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sRWxlbWVudCBcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudC53aWR0aCA9IENhbnZhcy5QQUdFX1dJRFRIO1xyXG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuaGVpZ2h0ID0gQ2FudmFzLlBBR0VfSEVJR0hUO1xyXG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNGQUZBRkEnO1xyXG5cclxuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuaHRtbEVsZW1lbnRcclxuICAgICAgICAgICAgLmdldENvbnRleHQoXHJcbiAgICAgICAgICAgICAgICAnMmQnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpOiB2b2lkIHtcclxuICAgICAgICAvLyBORVdcclxuICAgICAgICB0aGlzLmJ1aWxkVG9vbHMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmVUb29sKFxyXG4gICAgICAgICAgICBDYW52YXMuU0VMRUNUSU9OXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogcmVnaXN0ZXIgZm9yIG1vdXNlIGV2ZW50c1xyXG4gICAgICAgIC8vIGRvd24sIHVwLCBtb3ZlLCBkcmFnLCBkb3VibGVjbGlja1xyXG4gICAgICAgIC8vIGVudGVyLCBleGl0XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcclxuICAgICAgICAgICAgJ21vdXNlZG93bicsIFxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZU1vdXNlRG93blxyXG4gICAgICAgICAgICAgICAgLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcclxuICAgICAgICAgICAgJ21vdXNldXAnLCBcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZVVwXHJcbiAgICAgICAgICAgICAgICAuYmluZChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBY3RpdmVUb29sKCBcclxuICAgICAgICB0OiBudW1iZXIgKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbCA9IHRoaXMudG9vbHNbXHJcbiAgICAgICAgICAgIHRcclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnRleHQoKTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdHg7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCB3aWR0aCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50LndpZHRoO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaHRtbEVsZW1lbnQuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGFpbnQoKTogdm9pZCB7ICAgICAgICAgICAvLyBORVdcclxuICAgICAgICB0aGlzLmRyYXdHcmlkKFxyXG4gICAgICAgICAgICB0aGlzLmN0eFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIEFwcC5nZXRJbnN0YW5jZSgpXHJcbiAgICAgICAgICAgIC5wYWludChcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIHByaXZhdGUgY2xlYXIoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjRkFGQUZBJztcclxuICAgICAgICBjdHguZmlsbFJlY3QoIDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0ICk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3R3JpZChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB8IG51bGwgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIGlmICggY3R4ICkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyKFxyXG4gICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcclxuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gQ2FudmFzLkdSSURfQ09MT1I7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPOiB1c2UgZG9jdW1lbnQgc2l6ZVxyXG4gICAgICAgICAgICBjb25zdCBudW1WZXJ0aWNhbHM6IG51bWJlciA9IHRoaXMud2lkdGggLyBDYW52YXMuR1JJRF9TSVpFO1xyXG4gICAgICAgICAgICBjb25zdCBudW1Ib3Jpem9udGFsczogbnVtYmVyID0gdGhpcy5oZWlnaHQgLyBDYW52YXMuR1JJRF9TSVpFO1xyXG5cclxuICAgICAgICAgICAgLy8gdmVydGljYWxzXHJcbiAgICAgICAgICAgIGZvciAoIGxldCB2OiBudW1iZXIgPSAxOyB2IDwgbnVtVmVydGljYWxzOyB2KysgKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKCBcclxuICAgICAgICAgICAgICAgICAgICB2ICogQ2FudmFzLkdSSURfU0laRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgMCBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgIHYgKiBDYW52YXMuR1JJRF9TSVpFLCBcclxuICAgICAgICAgICAgICAgICAgICBDYW52YXMuUEFHRV9IRUlHSFQgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBob3Jpem9udGFsc1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgaDogbnVtYmVyID0gMTsgaCA8IG51bUhvcml6b250YWxzOyBoKysgKSB7XHJcbiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKCBcclxuICAgICAgICAgICAgICAgICAgICAwLCBcclxuICAgICAgICAgICAgICAgICAgICBoICogQ2FudmFzLkdSSURfU0laRSBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgIENhbnZhcy5QQUdFX1dJRFRILCBcclxuICAgICAgICAgICAgICAgICAgICBoICogQ2FudmFzLkdSSURfU0laRSBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkVXICAvLyBUT0RPOiBhZGQgcmVtYWluaW5nIHRvb2xzXHJcbiAgICBwcml2YXRlIGJ1aWxkVG9vbHMoKTogdm9pZCB7XHJcblxyXG4gICAgICAgIC8vIHRoaXMudG9vbHNbIENhbnZhcy5MSU5FX0NSRUFUSU9OIF0gPSBuZXcgTGluZUNyZWF0aW9uVG9vbCgpO1xyXG4gICAgICAgIC8vIHRoaXMudG9vbHNbIENhbnZhcy5SRUNUX0NSRUFUSU9OIF0gPSBuZXcgUmVjdENyZWF0aW9uVG9vbCgpO1xyXG4gICAgICAgIC8vIHRoaXMudG9vbHNbIENhbnZhcy5FTExJX0NSRUFUSU9OIF0gPSBuZXcgRWxsaUNyZWF0aW9uVG9vbCgpO1xyXG4gICAgICAgIC8vIHRoaXMudG9vbHNbIENhbnZhcy5URVhUX0NSRUFUSU9OIF0gPSBuZXcgVGV4dENyZWF0aW9uVG9vbCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudG9vbHNbIENhbnZhcy5TRUxFQ1RJT04gXSA9IG5ldyBTZWxlY3Rpb25Ub29sKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RhdGUgUGF0dGVyblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVNb3VzZURvd24oXHJcbiAgICAgICAgZXY6IE1vdXNlRXZlbnQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbFxyXG4gICAgICAgICAgICAub25Nb3VzZURvd24oXHJcbiAgICAgICAgICAgICAgICBldlxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0YXRlIFBhdHRlcm5cclxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VVcChcclxuICAgICAgICBldjogTW91c2VFdmVudCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVUb29sXHJcbiAgICAgICAgICAgIC5vbk1vdXNlVXAoXHJcbiAgICAgICAgICAgICAgICBldlxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyYXdpbmcgfSBmcm9tICcuLi9tb2RlbC9kcmF3aW5nJztcclxuaW1wb3J0IHsgTWFpbldpbmRvdyB9IGZyb20gJy4uL3ZpZXcvbWFpbi13aW5kb3cnO1xyXG5cclxuLy8gU2luZ2xldG9uID0+IEltbXV0YWJsZVxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBcHA7XHJcblxyXG4gICAgcHJpdmF0ZSBkcmF3aW5nOiBEcmF3aW5nO1xyXG4gICAgcHJpdmF0ZSBtYWluV2luZG93OiBNYWluV2luZG93O1xyXG4gICAgXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZHJhd2luZyA9IG5ldyBEcmF3aW5nKCk7XHJcbiAgICAgICAgdGhpcy5tYWluV2luZG93ID0gbmV3IE1haW5XaW5kb3coKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnR3JhcGhpY3MgRWRpdG9yIHYwLjYnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGxhenkgaW5pdGlhbGl6YXRpb24gKHByZWZlcnJlZClcclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBcHAge1xyXG4gICAgICAgIGlmICggQXBwLmluc3RhbmNlICkge1xyXG4gICAgICAgICAgICAvLyBOT09QXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBBcHAuaW5zdGFuY2UgPSBuZXcgQXBwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gQXBwLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHJ1bigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmRyYXdpbmcgICAgICAgICAgICAvLyBUT0RPOiByZW1vdmVcclxuICAgICAgICAgICAgLmFkZFRlc3RGaWd1cmVzKCk7XHJcblxyXG4gICAgICAgIHRoaXMubWFpbldpbmRvd1xyXG4gICAgICAgICAgICAuaW5pdCgpO1xyXG5cclxuICAgICAgICB0aGlzLnJlcGFpbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmcm9tIG1vZGVsIHRvIHZpZXcgXHJcbiAgICByZXBhaW50KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubWFpbldpbmRvd1xyXG4gICAgICAgICAgICAucmVwYWludCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZyb20gdmlldyB0byBtb2RlbFxyXG4gICAgcGFpbnQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd2luZ1xyXG4gICAgICAgICAgICAucGFpbnQoXHJcbiAgICAgICAgICAgICAgICBjdHhcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBORVdcclxuICAgIHNlbGVjdCggXHJcbiAgICAgICAgZXZEb3duOiBNb3VzZUV2ZW50LFxyXG4gICAgICAgIGV2VXA/OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZHJhd2luZ1xyXG4gICAgICAgICAgICAuc2VsZWN0KFxyXG4gICAgICAgICAgICAgICAgZXZEb3duLFxyXG4gICAgICAgICAgICAgICAgZXZVcFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEFwcCB9IGZyb20gJy4vY29udHJvbGxlci9hcHAnO1xyXG5cclxuY29uc3QgYXBwID0gQXBwLmdldEluc3RhbmNlKCk7XHJcbmFwcC5ydW4oKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFwcDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==