!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o;n.r(e),function(t){t[t.NORTH=0]="NORTH",t[t.NORTH_EAST=1]="NORTH_EAST",t[t.EAST=2]="EAST",t[t.SOUTH_EAST=3]="SOUTH_EAST",t[t.SOUTH=4]="SOUTH",t[t.SOUTH_WEST=5]="SOUTH_WEST",t[t.WEST=6]="WEST",t[t.NORTH_WEST=7]="NORTH_WEST"}(o||(o={}));var i,r=function(){function t(t,e){this.owner=t,this.cardinal=e}return t.prototype.paint=function(e){e.fillStyle=c.color;var n=0,i=0;switch(this.cardinal){case o.NORTH:n=this.owner.x+this.owner.w/2,i=this.owner.y;break;case o.NORTH_EAST:n=this.owner.x+this.owner.w,i=this.owner.y;break;case o.EAST:n=this.owner.x+this.owner.w,i=this.owner.y+this.owner.h/2;break;case o.SOUTH_EAST:n=this.owner.x+this.owner.w,i=this.owner.y+this.owner.h;break;case o.SOUTH:n=this.owner.x+this.owner.w/2,i=this.owner.y+this.owner.h;break;case o.SOUTH_WEST:n=this.owner.x,i=this.owner.y+this.owner.h;break;case o.WEST:n=this.owner.x,i=this.owner.y+this.owner.h/2;break;case o.NORTH_WEST:n=this.owner.x,i=this.owner.y}e.fillRect(n-t.HSIZE,i-t.HSIZE,2*t.HSIZE,2*t.HSIZE)},t.HSIZE=4,t}(),s=function(){function t(){}return t.colorAsString=function(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")"},t}(),c=function(){function t(t,e){this.position=t,this.size=e,this.ctrlPoints=[],this.addControlPoints()}return t.prototype.paint=function(e){e.save(),e.setLineDash([5,15]),e.strokeStyle=t.color,e.beginPath(),e.rect(this.position.x,this.position.y,this.size.w,this.size.h),e.stroke(),e.restore(),this.ctrlPoints.forEach((function(t){return t.paint(e)}))},Object.defineProperty(t.prototype,"x",{get:function(){return this.position.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.position.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this.size.w},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.size.h},enumerable:!1,configurable:!0}),t.prototype.select=function(t,e){return e?this.contained(t,e):this.contains(t)},t.prototype.addControlPoints=function(){var t=this;Object.keys(o).map((function(e){var n=Number(e);isNaN(n)||t.ctrlPoints.push(new r(t,n))}))},t.prototype.contains=function(t){var e=this.x,n=this.x+this.w,o=this.y,i=this.y+this.h;return e<t.clientX&&t.clientX<n&&o<t.clientY&&t.clientY<i},t.prototype.contained=function(t,e){return!1},t.color=s.colorAsString({r:28,g:116,b:232,a:255}),t}(),u=function(){function t(t,e){this.bbox=t,this.color=e,this._selected=!1,this.stringColor=s.colorAsString(this.color)}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(t){this._selected=t},enumerable:!1,configurable:!0}),t.prototype.paint=function(t){t.save(),this.doPaint(t),t.restore(),this.selected&&this.bbox.paint(t)},t.prototype.select=function(t,e){this.selected=this.bbox.select(t,e)},t}(),h=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(u),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.doPaint=function(t){t.strokeStyle=this.stringColor,t.beginPath();for(var e=this.bbox.w/2,n=this.bbox.h/2,o=this.bbox.x+e,i=this.bbox.y+n,r=0*Math.PI;r<2*Math.PI;r+=.01){var s=o-n*Math.sin(r)*Math.sin(0*Math.PI)+e*Math.cos(r)*Math.cos(0*Math.PI),c=i+e*Math.cos(r)*Math.sin(0*Math.PI)+n*Math.sin(r)*Math.cos(0*Math.PI);0==r?t.moveTo(s,c):t.lineTo(s,c)}t.stroke(),t.closePath()},e}(a),l=function(){function t(){this.figures=[],this.modified=!1,this.name=null}return t.prototype.paint=function(t){this.figures.forEach((function(e){return e.paint(t)}))},t.prototype.addTestFigures=function(){var t=new f(new c({x:100,y:100},{w:400,h:100}),{r:255,g:0,b:0,a:255});this.figures.push(t);var e=new f(new c({x:100,y:100},{w:400,h:200}),{r:0,g:255,b:0,a:255});this.figures.push(e);var n=new f(new c({x:100,y:100},{w:400,h:300}),{r:0,g:0,b:0,a:255});this.figures.push(n)},t.prototype.select=function(t,e){this.figures.forEach((function(n){return n.select(t,e)})),g.repaint()},t}(),y=function(){function t(){}return t.prototype.onMouseDown=function(t){this.evDown=t},t.prototype.onMouseUp=function(t){this.evUp=t,this.processMouseUp()},t.prototype.equal=function(t,e){return t.clientX===e.clientX&&t.clientY===e.clientY},t}(),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.processMouseUp=function(){this.equal(this.evDown,this.evUp)?g.select(this.evUp):g.select(this.evDown,this.evUp)},e}(y),b=function(){function t(){this.canvas=new T}return t.prototype.init=function(){this.canvas.init()},t.prototype.repaint=function(){this.canvas.repaint()},t}(),T=function(){function t(){this.tools=[],this.htmlElement=document.createElement("canvas"),document.body.appendChild(this.htmlElement),this.htmlElement.width=t.PAGE_WIDTH,this.htmlElement.height=t.PAGE_HEIGHT,this.htmlElement.style.backgroundColor="#FAFAFA",this.ctx=this.htmlElement.getContext("2d")}return t.prototype.init=function(){this.buildTools(),this.setActiveTool(t.SELECTION),window.addEventListener("mousedown",this.handleMouseDown.bind(this)),window.addEventListener("mouseup",this.handleMouseUp.bind(this))},t.prototype.setActiveTool=function(t){this.activeTool=this.tools[t]},t.prototype.getContext=function(){return this.ctx},Object.defineProperty(t.prototype,"width",{get:function(){return this.htmlElement.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.htmlElement.height},enumerable:!1,configurable:!0}),t.prototype.repaint=function(){this.drawGrid(this.ctx),E.getInstance().paint(this.ctx)},t.prototype.clear=function(t){t.fillStyle="#FAFAFA",t.fillRect(0,0,this.width,this.height)},t.prototype.drawGrid=function(e){if(e){this.clear(e),e.lineWidth=1,e.strokeStyle=t.GRID_COLOR;for(var n=this.width/t.GRID_SIZE,o=this.height/t.GRID_SIZE,i=1;i<n;i++)e.beginPath(),e.moveTo(i*t.GRID_SIZE,0),e.lineTo(i*t.GRID_SIZE,t.PAGE_HEIGHT),e.stroke();for(var r=1;r<o;r++)e.beginPath(),e.moveTo(0,r*t.GRID_SIZE),e.lineTo(t.PAGE_WIDTH,r*t.GRID_SIZE),e.stroke()}},t.prototype.buildTools=function(){this.tools[t.SELECTION]=new w},t.prototype.handleMouseDown=function(t){this.activeTool.onMouseDown(t)},t.prototype.handleMouseUp=function(t){this.activeTool.onMouseUp(t)},t.LINE_CREATION=0,t.RECT_CREATION=1,t.ELLI_CREATION=2,t.TEXT_CREATION=3,t.SELECTION=4,t.PAGE_WIDTH=2e3,t.PAGE_HEIGHT=2e3,t.GRID_SIZE=100,t.GRID_COLOR="#DDD0DD",t}(),E=function(){function t(){this.drawing=new l,this.mainWindow=new b,document.title="Graphics Editor v0.6"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.run=function(){this.drawing.addTestFigures(),this.mainWindow.init(),this.repaint()},t.prototype.repaint=function(){this.mainWindow.repaint()},t.prototype.paint=function(t){this.drawing.paint(t)},t.prototype.select=function(t,e){this.drawing.select(t,e)},t}(),_=E.getInstance();_.run();var g=e.default=_}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2NvbnRyb2wtcG9pbnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWwvY29sb3ItaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9ib3VuZC1ib3gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2ZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZ2VvbWV0cmljLWZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZWxsaXBzZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy90b29sLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3NlbGVjdGlvbi10b29sLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L21haW4td2luZG93LnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDYXJkaW5hbCIsIm93bmVyIiwiY2FyZGluYWwiLCJwYWludCIsImN0eCIsImZpbGxTdHlsZSIsImNvbG9yIiwieCIsInkiLCJ0aGlzIiwiTk9SVEgiLCJ3IiwiTk9SVEhfRUFTVCIsIkVBU1QiLCJoIiwiU09VVEhfRUFTVCIsIlNPVVRIIiwiU09VVEhfV0VTVCIsIldFU1QiLCJOT1JUSF9XRVNUIiwiZmlsbFJlY3QiLCJDb250cm9sUG9pbnQiLCJIU0laRSIsImNvbG9yQXNTdHJpbmciLCJnIiwiYiIsImEiLCJwb3NpdGlvbiIsInNpemUiLCJjdHJsUG9pbnRzIiwiYWRkQ29udHJvbFBvaW50cyIsInNhdmUiLCJzZXRMaW5lRGFzaCIsInN0cm9rZVN0eWxlIiwiQm91bmRCb3giLCJiZWdpblBhdGgiLCJyZWN0Iiwic3Ryb2tlIiwicmVzdG9yZSIsImZvckVhY2giLCJjcCIsInNlbGVjdCIsImV2RG93biIsImV2VXAiLCJjb250YWluZWQiLCJjb250YWlucyIsImtleXMiLCJtYXAiLCJOdW1iZXIiLCJpc05hTiIsInB1c2giLCJldiIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsImNsaWVudFgiLCJjbGllbnRZIiwiQ29sb3JIZWxwZXIiLCJiYm94IiwiX3NlbGVjdGVkIiwic3RyaW5nQ29sb3IiLCJkb1BhaW50Iiwic2VsZWN0ZWQiLCJyYWlkaXVzWCIsInJhaWRpdXNZIiwiY2VudGVyWCIsImNlbnRlclkiLCJNYXRoIiwiUEkiLCJ4UG9zIiwic2luIiwiY29zIiwieVBvcyIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsIkdlb21ldHJpY0ZpZ3VyZSIsImZpZ3VyZXMiLCJtb2RpZmllZCIsImYiLCJhZGRUZXN0RmlndXJlcyIsInJlZEVsbGlwc2UiLCJFbGxpcHNlIiwiZ3JlZW5FbGxpcHNlIiwiYmxhY2tFbGxpcHNlIiwicmVwYWludCIsIm9uTW91c2VEb3duIiwib25Nb3VzZVVwIiwicHJvY2Vzc01vdXNlVXAiLCJlcXVhbCIsImV2MSIsImV2MiIsIlRvb2wiLCJjYW52YXMiLCJpbml0IiwidG9vbHMiLCJodG1sRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIndpZHRoIiwiQ2FudmFzIiwiUEFHRV9XSURUSCIsImhlaWdodCIsIlBBR0VfSEVJR0hUIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJnZXRDb250ZXh0IiwiYnVpbGRUb29scyIsInNldEFjdGl2ZVRvb2wiLCJTRUxFQ1RJT04iLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlTW91c2VEb3duIiwiaGFuZGxlTW91c2VVcCIsImFjdGl2ZVRvb2wiLCJkcmF3R3JpZCIsImdldEluc3RhbmNlIiwiY2xlYXIiLCJsaW5lV2lkdGgiLCJHUklEX0NPTE9SIiwibnVtVmVydGljYWxzIiwiR1JJRF9TSVpFIiwibnVtSG9yaXpvbnRhbHMiLCJ2IiwiTElORV9DUkVBVElPTiIsIlJFQ1RfQ1JFQVRJT04iLCJFTExJX0NSRUFUSU9OIiwiVEVYVF9DUkVBVElPTiIsImRyYXdpbmciLCJtYWluV2luZG93IiwiTWFpbldpbmRvdyIsInRpdGxlIiwiQXBwIiwiaW5zdGFuY2UiLCJydW4iLCJhcHAiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JB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SSxhQUNJakgsS0FBSzBILFFBQVUsSUFBSSxFQUNuQjFILEtBQUsySCxXQUFhLElBQUlDLEVBRXRCbkMsU0FBU29DLE1BQVEsdUJBb0R6QixPQWhEVyxFQUFBZixZQUFQLFdBUUksT0FQS2dCLEVBQUlDLFdBSUxELEVBQUlDLFNBQVcsSUFBSUQsR0FHaEJBLEVBQUlDLFVBR2YsWUFBQUMsSUFBQSxXQUNJaEksS0FBSzBILFFBQ0FsRCxpQkFFTHhFLEtBQUsySCxXQUNBckMsT0FFTHRGLEtBQUs2RSxXQUlULFlBQUFBLFFBQUEsV0FDSTdFLEtBQUsySCxXQUNBOUMsV0FJVCxZQUFBbkYsTUFBQSxTQUNJQyxHQUVBSyxLQUFLMEgsUUFDQWhJLE1BQ0dDLElBS1osWUFBQXFDLE9BQUEsU0FDSUMsRUFDQUMsR0FFQWxDLEtBQUswSCxRQUNBMUYsT0FDR0MsRUFDQUMsSUFHaEIsRUE5REEsR0NGTStGLEVBQU0sRUFBSW5CLGNBQ2hCbUIsRUFBSUQsTUFFVyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBHcmFwaGljc09iamVjdCB9IGZyb20gJy4vZ3JhcGhpY3Mtb2JqZWN0JztcclxuaW1wb3J0IHsgQm91bmRCb3ggfSBmcm9tICcuL2JvdW5kLWJveCc7XHJcblxyXG5leHBvcnQgZW51bSBDYXJkaW5hbCB7XHJcbiAgICBOT1JUSCxcclxuICAgIE5PUlRIX0VBU1QsXHJcbiAgICBFQVNULFxyXG4gICAgU09VVEhfRUFTVCxcclxuICAgIFNPVVRILFxyXG4gICAgU09VVEhfV0VTVCxcclxuICAgIFdFU1QsXHJcbiAgICBOT1JUSF9XRVNUXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb250cm9sUG9pbnQgXHJcbiAgICBpbXBsZW1lbnRzIEdyYXBoaWNzT2JqZWN0IHtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgSFNJWkU6IG51bWJlciA9IDQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBvd25lcjogQm91bmRCb3gsXHJcbiAgICAgICAgcHJpdmF0ZSBjYXJkaW5hbDogQ2FyZGluYWwgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgcGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gQm91bmRCb3guY29sb3I7XHJcblxyXG4gICAgICAgIGxldCB4ID0gMDtcclxuICAgICAgICBsZXQgeSA9IDA7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGNvbXBsZXRlIHN3aXRjaFxyXG5cclxuICAgICAgICBzd2l0Y2ggKCB0aGlzLmNhcmRpbmFsICkge1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLk5PUlRIOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudyAvIDI7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEhfRUFTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLnc7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuRUFTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLnc7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55ICsgdGhpcy5vd25lci5oLzI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5TT1VUSF9FQVNUOlxyXG4gICAgICAgICAgICAgICAgeCA9IHRoaXMub3duZXIueCArIHRoaXMub3duZXIudztcclxuICAgICAgICAgICAgICAgIHkgPSB0aGlzLm93bmVyLnkgKyB0aGlzLm93bmVyLmg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBDYXJkaW5hbC5TT1VUSDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLnggKyB0aGlzLm93bmVyLncgLyAyO1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLlNPVVRIX1dFU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENhcmRpbmFsLldFU1Q6XHJcbiAgICAgICAgICAgICAgICB4ID0gdGhpcy5vd25lci54O1xyXG4gICAgICAgICAgICAgICAgeSA9IHRoaXMub3duZXIueSArIHRoaXMub3duZXIuaC8yO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgQ2FyZGluYWwuTk9SVEhfV0VTVDpcclxuICAgICAgICAgICAgICAgIHggPSB0aGlzLm93bmVyLng7XHJcbiAgICAgICAgICAgICAgICB5ID0gdGhpcy5vd25lci55O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdHguZmlsbFJlY3QoIFxyXG4gICAgICAgICAgICB4IC0gQ29udHJvbFBvaW50LkhTSVpFLCB5IC0gQ29udHJvbFBvaW50LkhTSVpFLCBcclxuICAgICAgICAgICAgMiAqIENvbnRyb2xQb2ludC5IU0laRSwgMiAqIENvbnRyb2xQb2ludC5IU0laRSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgQ29sb3Ige1xuICAgIHI6IG51bWJlcjtcbiAgICBnOiBudW1iZXI7XG4gICAgYjogbnVtYmVyO1xuICAgIGE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvbG9ySGVscGVyIHtcblxuICAgIHN0YXRpYyBjb2xvckFzU3RyaW5nKFxuICAgICAgICBjb2xvcjogQ29sb3IgKTogc3RyaW5nIHtcblxuICAgICAgICByZXR1cm4gJ3JnYmEoJ1xuICAgICAgICAgICAgKyBjb2xvci5yXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyBjb2xvci5nXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyBjb2xvci5iXG4gICAgICAgICAgICArICcsJ1xuICAgICAgICAgICAgKyAoY29sb3IuYSAvIDI1NSlcbiAgICAgICAgICAgICsgJyknO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENhcmRpbmFsLCBDb250cm9sUG9pbnQgfSBmcm9tICcuL2NvbnRyb2wtcG9pbnQnO1xyXG5pbXBvcnQgeyBDb2xvckhlbHBlciB9IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcclxuaW1wb3J0IHsgR3JhcGhpY3NPYmplY3QgfSBmcm9tICcuL2dyYXBoaWNzLW9iamVjdCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFBvc2l0aW9uIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEaW1lbnNpb24ge1xyXG4gICAgdzogbnVtYmVyO1xyXG4gICAgaDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQm91bmRCb3ggXHJcbiAgICBpbXBsZW1lbnRzIEdyYXBoaWNzT2JqZWN0IHtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgY29sb3I6IHN0cmluZyA9IENvbG9ySGVscGVyLmNvbG9yQXNTdHJpbmcoe1xyXG4gICAgICAgIHI6IDI4LFxyXG4gICAgICAgIGc6IDExNixcclxuICAgICAgICBiOiAyMzIsXHJcbiAgICAgICAgYTogMjU1LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gcHVibGljIGludGVyZmFjZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBwb3NpdGlvbjogUG9zaXRpb24sXHJcbiAgICAgICAgcHJpdmF0ZSBzaXplOiBEaW1lbnNpb24gKSB7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29udHJvbFBvaW50cygpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhaW50KCBcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgLy8gZHJhdyBib3VuZCBib3hcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIGN0eC5zZXRMaW5lRGFzaChbNSwgMTVdKTtcclxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBCb3VuZEJveC5jb2xvcjtcclxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY3R4LnJlY3QoIFxyXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uLngsIHRoaXMucG9zaXRpb24ueSwgXHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZS53LCAgICAgdGhpcy5zaXplLmggXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjdHguc3Ryb2tlKCk7XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICAgICAgLy8gZHJhdyBjb250cm9sIHBvaW50c1xyXG4gICAgICAgIHRoaXMuY3RybFBvaW50cy5mb3JFYWNoKCBcclxuICAgICAgICAgICAgKGNwOiBDb250cm9sUG9pbnQpID0+IGNwLnBhaW50KCBjdHggKSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCB4KCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24ueDtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgeSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHcoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplLnc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplLmg7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkVXXHJcbiAgICBzZWxlY3QoXHJcbiAgICAgICAgZXZEb3duOiBNb3VzZUV2ZW50LFxyXG4gICAgICAgIGV2VXA/OiBNb3VzZUV2ZW50ICk6IGJvb2xlYW4ge1xyXG4gICAgICAgICBcclxuICAgICAgICBpZiAoIGV2VXAgKSB7XHJcbiAgICAgICAgICAgIC8vIGJvdW5kIGJveCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVkKFxyXG4gICAgICAgICAgICAgICAgZXZEb3duLCBldlVwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBwb2ludCBzZWxlY3Rpb25cclxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWlucyhcclxuICAgICAgICAgICAgZXZEb3duXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBub24tcHVibGljIG1lbWJlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIFxyXG4gICAgcHJpdmF0ZSBjdHJsUG9pbnRzOiBDb250cm9sUG9pbnRbXSA9IFtcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBhZGRDb250cm9sUG9pbnRzKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyB0YXJnZXQgPSBFUzIwMTcrXHJcbiAgICAgICAgLy8gT2JqZWN0LnZhbHVlcyhcclxuICAgICAgICAvLyAgICAgQ2FyZGluYWxcclxuICAgICAgICAvLyApXHJcbiAgICAgICAgLy8gLm1hcCggKGNhcmRpbmFsOiBDYXJkaW5hbCkgPT5cclxuICAgICAgICAvLyAgICAgdGhpcy5jdHJsUG9pbnRzXHJcbiAgICAgICAgLy8gICAgICAgICAucHVzaChcclxuICAgICAgICAvLyAgICAgICAgICAgICBuZXcgQ29udHJvbFBvaW50KFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjYXJkaW5hbFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIClcclxuICAgICAgICAvLyAgICAgICAgIClcclxuICAgICAgICAvLyApO1xyXG5cclxuICAgICAgICAvLyB0YXJnZXQgPSBFUzVcclxuICAgICAgICBPYmplY3Qua2V5cyhcclxuICAgICAgICAgICAgQ2FyZGluYWxcclxuICAgICAgICApXHJcbiAgICAgICAgLm1hcCggKGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmRpbmFsOiBudW1iZXIgPSBOdW1iZXIoIFxyXG4gICAgICAgICAgICAgICAga2V5IFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCAhaXNOYU4oIGNhcmRpbmFsICkgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0cmxQb2ludHNcclxuICAgICAgICAgICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENvbnRyb2xQb2ludChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkaW5hbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnRhaW5zKFxyXG4gICAgICAgIGV2OiBNb3VzZUV2ZW50ICk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICBjb25zdCBsZWZ0OiAgIG51bWJlciA9IHRoaXMueDtcclxuICAgICAgICBjb25zdCByaWdodDogIG51bWJlciA9IHRoaXMueCArIHRoaXMudztcclxuICAgICAgICBjb25zdCB0b3A6ICAgIG51bWJlciA9IHRoaXMueTtcclxuICAgICAgICBjb25zdCBib3R0b206IG51bWJlciA9IHRoaXMueSArIHRoaXMuaDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIHJldHVybiBsZWZ0IDwgZXYuY2xpZW50WCAmJiBldi5jbGllbnRYIDwgcmlnaHRcclxuICAgICAgICAgICAgJiYgdG9wIDwgZXYuY2xpZW50WSAmJiBldi5jbGllbnRZIDwgYm90dG9tO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE9cclxuICAgIHByaXZhdGUgY29udGFpbmVkKFxyXG4gICAgICAgIGV2RG93bjogTW91c2VFdmVudCxcclxuICAgICAgICBldlVwOiBNb3VzZUV2ZW50ICk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQm91bmRCb3ggfSBmcm9tICcuL2JvdW5kLWJveCc7XHJcbmltcG9ydCB7IENvbG9yLENvbG9ySGVscGVyIH0gZnJvbSAnLi4vdXRpbC9jb2xvci1oZWxwZXInO1xyXG5pbXBvcnQgeyBHcmFwaGljc09iamVjdCB9IGZyb20gJy4vZ3JhcGhpY3Mtb2JqZWN0JztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWd1cmUgXHJcbiAgICBpbXBsZW1lbnRzIEdyYXBoaWNzT2JqZWN0IHtcclxuXHJcbiAgICAvLyBwdWJsaWMgaW50ZXJmYWNlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIFxyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGRvUGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJvdGVjdGVkIGJib3g6IEJvdW5kQm94LCAgICAgICAvLyBORVdcclxuICAgICAgICBwcm90ZWN0ZWQgY29sb3I6IENvbG9yICkge1xyXG4gICAgfTtcclxuICAgIHByb3RlY3RlZCBfc2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBnZXQgc2VsZWN0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkO1xyXG4gICAgfTtcclxuXHJcbiAgICBzZXQgc2VsZWN0ZWQoIHM6IGJvb2xlYW4gKSB7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWQgPSBzO1xyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBzdHJpbmdDb2xvcjogc3RyaW5nID0gQ29sb3JIZWxwZXIuY29sb3JBc1N0cmluZyhcclxuICAgICAgICAgICAgdGhpcy5jb2xvclxyXG4gICAgICAgICk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgLy8gVGVtcGxhdGUgTWV0aG9kXHJcbiAgICBwYWludCggXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gMS4gU2F2ZXMgY3VycmVudCBzdGF0ZSBvZiBjdHhcclxuICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgIC8vIDIuIFBhaW50cyBmaWd1cmVcclxuICAgICAgICB0aGlzLmRvUGFpbnQoXHJcbiAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gMy4gUmVzdG9yZXMgc3RhdGUgb2YgY3R4XHJcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuXHJcbiAgICAgICAgLy8gNC4gcGFpbnQgYm91bmRpbmcgYm94XHJcbiAgICAgICAgaWYgKCB0aGlzLnNlbGVjdGVkICkge1xyXG4gICAgICAgICAgICB0aGlzLmJib3hcclxuICAgICAgICAgICAgICAgIC5wYWludChcclxuICAgICAgICAgICAgICAgICAgICBjdHhcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5FV1xyXG4gICAgc2VsZWN0KCBcclxuICAgICAgICBldkRvd246IE1vdXNlRXZlbnQsXHJcbiAgICAgICAgZXZVcD86IE1vdXNlRXZlbnQgKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuYmJveFxyXG4gICAgICAgICAgICAuc2VsZWN0KCBcclxuICAgICAgICAgICAgICAgIGV2RG93biwgXHJcbiAgICAgICAgICAgICAgICBldlVwIFxyXG4gICAgICAgICAgICApO1xyXG4gICAgLy8gbm9uLXB1YmxpYyBtZW1iZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRmlndXJlIH0gZnJvbSAnLi9maWd1cmUnO1xyXG5pbXBvcnQgeyBDb2xvcixDb2xvckhlbHBlciB9IGZyb20gJy4uL3V0aWwvY29sb3ItaGVscGVyJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBHZW9tZXRyaWNGaWd1cmUgXHJcbiAgICBleHRlbmRzIEZpZ3VyZSB7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9zdHJpbmdDb2xvcjogc3RyaW5nO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZGFzaFN0cm9rZTogbnVtYmVyO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZGFzaFNwYWNlOiBudW1iZXI7XHJcbiAgICB9IiwiaW1wb3J0IHsgXHJcbiAgICBHZW9tZXRyaWNGaWd1cmUsXHJcbn0gZnJvbSAnLi9nZW9tZXRyaWMtZmlndXJlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFbGxpcHNlXHJcbiAgICBleHRlbmRzIEdlb21ldHJpY0ZpZ3VyZSB7XHJcblxyXG4gICAgcHJvdGVjdGVkIGRvUGFpbnQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5zdHJpbmdDb2xvcjtcclxuXHJcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGxldCBhbmdsZSA9IDBcclxuICAgICAgICBsZXQgcmFpZGl1c1ggPSB0aGlzLmJib3gudy8yO1xyXG4gICAgICAgIGxldCByYWlkaXVzWSA9IHRoaXMuYmJveC5oLzI7XHJcbiAgICAgICAgbGV0IGNlbnRlclggPSB0aGlzLmJib3gueCArIHJhaWRpdXNYO1xyXG4gICAgICAgIGxldCBjZW50ZXJZID0gdGhpcy5iYm94LnkgKyByYWlkaXVzWTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMCAqIE1hdGguUEk7IGkgPCAyICogTWF0aC5QSTsgaSArPSAwLjAxKSB7XHJcbiAgICAgICAgICAgIGxldCB4UG9zID0gY2VudGVyWCAtIChyYWlkaXVzWSAqIE1hdGguc2luKGkpKSAqIE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSkgKyAocmFpZGl1c1ggKiBNYXRoLmNvcyhpKSkgKiBNYXRoLmNvcyhhbmdsZSAqIE1hdGguUEkpO1xyXG4gICAgICAgICAgICBsZXQgeVBvcyA9IGNlbnRlclkgKyAocmFpZGl1c1ggKiBNYXRoLmNvcyhpKSkgKiBNYXRoLnNpbihhbmdsZSAqIE1hdGguUEkpICsgKHJhaWRpdXNZICogTWF0aC5zaW4oaSkpICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpID09IDApIHtcclxuICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeFBvcywgeVBvcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHhQb3MsIHlQb3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgYXBwIGZyb20gJy4uL2luZGV4JztcclxuXHJcbmltcG9ydCB7IFxyXG4gICAgQm91bmRCb3gsIFxyXG59IGZyb20gJy4vYm91bmQtYm94JztcclxuXHJcbmltcG9ydCB7IFxyXG4gICAgRmlndXJlLCBcclxufSBmcm9tICcuL2ZpZ3VyZSc7XHJcblxyXG5pbXBvcnQgeyBcclxuICAgIExpbmUgXHJcbn0gZnJvbSAnLi9saW5lJztcclxuaW1wb3J0IHsgXHJcbiAgICBSZWN0YW5nbGUgXHJcbn0gZnJvbSAnLi9yZWN0YW5nbGUnO1xyXG5pbXBvcnQgeyBcclxuICAgIEVsbGlwc2UgXHJcbn0gZnJvbSAnLi9lbGxpcHNlJztcclxuaW1wb3J0IHsgXHJcbiAgICBUZXh0IFxyXG59IGZyb20gJy4vdGV4dCc7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIERyYXdpbmcge1xyXG4gICAgcHJpdmF0ZSBmaWd1cmVzOiBGaWd1cmVbXSA9IFtcclxuICAgIF07XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RpZmllZCA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBuYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIH1cclxuXHJcbiAgICAvLyBwb2x5bW9ycGhpc20gaW4gYWN0aW9uXHJcbiAgICBwYWludChcclxuICAgICAgICBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcclxuXHJcbiAgICAgICAgdGhpcy5maWd1cmVzLmZvckVhY2goIFxyXG4gICAgICAgICAgICAoZjogRmlndXJlKSA9PiBmLnBhaW50KCBjdHggKSBcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRPRE86IGRlbGV0ZSB0aGlzXHJcbiAgICBhZGRUZXN0RmlndXJlcygpOiB2b2lkIHsgICAgICAgICAgICAgICBcclxuICAgICAgICBjb25zdCByZWRFbGxpcHNlOiBFbGxpcHNlID0gbmV3IEVsbGlwc2UoXHJcbiAgICAgICAgICAgIG5ldyBCb3VuZEJveCggeyB4OiAxMDAsIHk6IDEwMCB9LCB7IHc6IDQwMCwgaDogMTAwIH0gKSwgICAvLyBORVdcclxuICAgICAgICAgICAgeyByOiAyNTUsIGc6IDAsIGI6IDAsIGE6IDI1NSB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aGlzLmZpZ3VyZXNcclxuICAgICAgICAgICAgLnB1c2goXHJcbiAgICAgICAgICAgICAgICByZWRFbGxpcHNlXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGdyZWVuRWxsaXBzZTogRWxsaXBzZSA9IG5ldyBFbGxpcHNlKFxyXG4gICAgICAgICAgICBuZXcgQm91bmRCb3goIHsgeDogMTAwLCB5OiAxMDAgfSwgeyB3OiA0MDAsIGg6IDIwMCB9ICksICAgLy8gTkVXXHJcbiAgICAgICAgICAgIHsgcjogMCwgZzogMjU1LCBiOiAwLCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgZ3JlZW5FbGxpcHNlXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IGJsYWNrRWxsaXBzZTogRWxsaXBzZSA9IG5ldyBFbGxpcHNlKFxyXG4gICAgICAgICAgICBuZXcgQm91bmRCb3goIHsgeDogMTAwLCB5OiAxMDAgfSwgeyB3OiA0MDAsIGg6IDMwMCB9ICksICAgLy8gTkVXXHJcbiAgICAgICAgICAgIHsgcjogMCwgZzogMCwgYjogMCwgYTogMjU1IH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZmlndXJlc1xyXG4gICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgIGJsYWNrRWxsaXBzZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIHNlbGVjdEFsbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpZ3VyZXMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChmOiBGaWd1cmUpID0+IGYuc2VsZWN0ZWQgPSB0cnVlIFxyXG4gICAgICAgICk7XHJcbiAgICB9ICovXHJcblxyXG4gICAgLy8gTkVXXHJcbiAgICBzZWxlY3QoIFxyXG4gICAgICAgIGV2RG93bjogTW91c2VFdmVudCxcclxuICAgICAgICBldlVwPzogTW91c2VFdmVudCApOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmZpZ3VyZXMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChmOiBGaWd1cmUpID0+IGYuc2VsZWN0KCBldkRvd24sIGV2VXAgKSBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBzb21ldGhpbmcgc2VsZWN0ZWQ/XHJcbiAgICAgICAgYXBwLnJlcGFpbnQoKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgVG9vbCB7XHJcbiAgICBcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9jZXNzTW91c2VVcCgpOiB2b2lkO1xyXG5cclxuICAgIHByb3RlY3RlZCBldkRvd246IE1vdXNlRXZlbnQ7XHJcbiAgICBwcm90ZWN0ZWQgZXZVcDogICBNb3VzZUV2ZW50O1xyXG5cclxuICAgIG9uTW91c2VEb3duKFxyXG4gICAgICAgIGV2OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmV2RG93biA9IGV2O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRlbXBsYXRlIE1ldGhvZFxyXG4gICAgb25Nb3VzZVVwKFxyXG4gICAgICAgIGV2OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyAxLiBzYXZlIGV2ZW50XHJcbiAgICAgICAgdGhpcy5ldlVwID0gZXY7XHJcblxyXG4gICAgICAgIC8vIDIuIGRvIHNvbWV0aGluZyB3LyB0aGUgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5wcm9jZXNzTW91c2VVcCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG5vbi1wdWJsaWMgbWVtYmVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZXF1YWwoXHJcbiAgICAgICAgZXYxOiBNb3VzZUV2ZW50LFxyXG4gICAgICAgIGV2MjogTW91c2VFdmVudCApOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIGV2MS5jbGllbnRYID09PSBldjIuY2xpZW50WCBcclxuICAgICAgICAgICAgJiYgZXYxLmNsaWVudFkgPT09IGV2Mi5jbGllbnRZO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVG9vbCB9IGZyb20gJy4vdG9vbCc7XHJcblxyXG5pbXBvcnQgYXBwIGZyb20gJy4uL2luZGV4JztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25Ub29sIFxyXG4gICAgZXh0ZW5kcyBUb29sIHtcclxuXHJcbiAgICBwcm90ZWN0ZWQgcHJvY2Vzc01vdXNlVXAoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmVxdWFsKCB0aGlzLmV2RG93biwgdGhpcy5ldlVwICkgKSB7XHJcbiAgICAgICAgICAgIC8vIHBvaW50IHNlbGVjdGlvblxyXG4gICAgICAgICAgICBhcHAuc2VsZWN0KFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ldlVwXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBib3VuZCBib3ggc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIGFwcC5zZWxlY3QoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2RG93bixcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZVcFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IFxyXG4gICAgQXBwIFxyXG59IGZyb20gJy4uL2NvbnRyb2xsZXIvYXBwJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNYWluV2luZG93IHtcclxuICAgIC8vIHByaXZhdGUgbWVudTogTWVudUhlbHBlcjtcclxuICAgIHByaXZhdGUgY2FudmFzOiBDYW52YXM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkVXXHJcbiAgICBpbml0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FudmFzXHJcbiAgICAgICAgICAgIC5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwYWludCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNhbnZhc1xyXG4gICAgICAgICAgICAucmVwYWludCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUgcHJpdmF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuaW1wb3J0IHsgVG9vbCB9IGZyb20gJy4vdG9vbCc7XHJcbmltcG9ydCB7IFNlbGVjdGlvblRvb2wgfSBmcm9tICcuL3NlbGVjdGlvbi10b29sJztcclxuXHJcbmNsYXNzIENhbnZhcyB7XHJcblxyXG4gICAgcHJpdmF0ZSBodG1sRWxlbWVudDogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHwgbnVsbDtcclxuXHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgTElORV9DUkVBVElPTjogbnVtYmVyID0gMDtcclxuICAgIHN0YXRpYyByZWFkb25seSBSRUNUX0NSRUFUSU9OOiBudW1iZXIgPSAxO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEVMTElfQ1JFQVRJT046IG51bWJlciA9IDI7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgVEVYVF9DUkVBVElPTjogbnVtYmVyID0gMztcclxuICAgIHN0YXRpYyByZWFkb25seSBTRUxFQ1RJT046ICAgICBudW1iZXIgPSA0O1xyXG4gICAgLy8gTkVXIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBwcml2YXRlIHRvb2xzOiBUb29sW10gPSBbXHJcbiAgICBdO1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVUb29sOiBUb29sO1xyXG4gICAgLy8gTkVXIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IFBBR0VfV0lEVEg6IG51bWJlciA9IDIwMDA7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgUEFHRV9IRUlHSFQ6IG51bWJlciA9IDIwMDA7XHJcblxyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdSSURfU0laRTogbnVtYmVyID0gMTAwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IEdSSURfQ09MT1I6IHN0cmluZyA9ICcjREREMEREJztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcclxuICAgICAgICAgICAgJ2NhbnZhcydcclxuICAgICAgICApO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHlcclxuICAgICAgICAgICAgLmFwcGVuZENoaWxkKCBcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbEVsZW1lbnQgXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQud2lkdGggPSBDYW52YXMuUEFHRV9XSURUSDtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmhlaWdodCA9IENhbnZhcy5QQUdFX0hFSUdIVDtcclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjRkFGQUZBJztcclxuXHJcbiAgICAgICAgdGhpcy5jdHggPSB0aGlzLmh0bWxFbGVtZW50XHJcbiAgICAgICAgICAgIC5nZXRDb250ZXh0KFxyXG4gICAgICAgICAgICAgICAgJzJkJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgdGhpcy5idWlsZFRvb2xzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVG9vbChcclxuICAgICAgICAgICAgQ2FudmFzLlNFTEVDVElPTlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IHJlZ2lzdGVyIGZvciBtb3VzZSBldmVudHNcclxuICAgICAgICAvLyBkb3duLCB1cCwgbW92ZSwgZHJhZywgZG91YmxlY2xpY2tcclxuICAgICAgICAvLyBlbnRlciwgZXhpdFxyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXHJcbiAgICAgICAgICAgICdtb3VzZWRvd24nLCBcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZURvd25cclxuICAgICAgICAgICAgICAgIC5iaW5kKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXHJcbiAgICAgICAgICAgICdtb3VzZXVwJywgXHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2VVcFxyXG4gICAgICAgICAgICAgICAgLmJpbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWN0aXZlVG9vbCggXHJcbiAgICAgICAgdDogbnVtYmVyICkge1xyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2wgPSB0aGlzLnRvb2xzW1xyXG4gICAgICAgICAgICB0XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5odG1sRWxlbWVudC53aWR0aDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50LmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXBhaW50KCk6IHZvaWQgeyAgICAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgdGhpcy5kcmF3R3JpZChcclxuICAgICAgICAgICAgdGhpcy5jdHhcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBBcHAuZ2V0SW5zdGFuY2UoKVxyXG4gICAgICAgICAgICAucGFpbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyKFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZBRkFGQSc7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KCAwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd0dyaWQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsICk6IHZvaWQge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiAoIGN0eCApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcihcclxuICAgICAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IENhbnZhcy5HUklEX0NPTE9SO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogdXNlIGRvY3VtZW50IHNpemVcclxuICAgICAgICAgICAgY29uc3QgbnVtVmVydGljYWxzOiBudW1iZXIgPSB0aGlzLndpZHRoIC8gQ2FudmFzLkdSSURfU0laRTtcclxuICAgICAgICAgICAgY29uc3QgbnVtSG9yaXpvbnRhbHM6IG51bWJlciA9IHRoaXMuaGVpZ2h0IC8gQ2FudmFzLkdSSURfU0laRTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZlcnRpY2Fsc1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgdjogbnVtYmVyID0gMTsgdiA8IG51bVZlcnRpY2FsczsgdisrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgdiAqIENhbnZhcy5HUklEX1NJWkUsIFxyXG4gICAgICAgICAgICAgICAgICAgIDAgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICB2ICogQ2FudmFzLkdSSURfU0laRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgQ2FudmFzLlBBR0VfSEVJR0hUIFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaG9yaXpvbnRhbHNcclxuICAgICAgICAgICAgZm9yICggbGV0IGg6IG51bWJlciA9IDE7IGggPCBudW1Ib3Jpem9udGFsczsgaCsrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICBDYW52YXMuUEFHRV9XSURUSCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5FVyAgLy8gVE9ETzogYWRkIHJlbWFpbmluZyB0b29sc1xyXG4gICAgcHJpdmF0ZSBidWlsZFRvb2xzKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAvLyB0aGlzLnRvb2xzWyBDYW52YXMuTElORV9DUkVBVElPTiBdID0gbmV3IExpbmVDcmVhdGlvblRvb2woKTtcclxuICAgICAgICAvLyB0aGlzLnRvb2xzWyBDYW52YXMuUkVDVF9DUkVBVElPTiBdID0gbmV3IFJlY3RDcmVhdGlvblRvb2woKTtcclxuICAgICAgICAvLyB0aGlzLnRvb2xzWyBDYW52YXMuRUxMSV9DUkVBVElPTiBdID0gbmV3IEVsbGlDcmVhdGlvblRvb2woKTtcclxuICAgICAgICAvLyB0aGlzLnRvb2xzWyBDYW52YXMuVEVYVF9DUkVBVElPTiBdID0gbmV3IFRleHRDcmVhdGlvblRvb2woKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnRvb2xzWyBDYW52YXMuU0VMRUNUSU9OIF0gPSBuZXcgU2VsZWN0aW9uVG9vbCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0YXRlIFBhdHRlcm5cclxuICAgIHByaXZhdGUgaGFuZGxlTW91c2VEb3duKFxyXG4gICAgICAgIGV2OiBNb3VzZUV2ZW50ICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZVRvb2xcclxuICAgICAgICAgICAgLm9uTW91c2VEb3duKFxyXG4gICAgICAgICAgICAgICAgZXZcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTdGF0ZSBQYXR0ZXJuXHJcbiAgICBwcml2YXRlIGhhbmRsZU1vdXNlVXAoXHJcbiAgICAgICAgZXY6IE1vdXNlRXZlbnQgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbFxyXG4gICAgICAgICAgICAub25Nb3VzZVVwKFxyXG4gICAgICAgICAgICAgICAgZXZcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEcmF3aW5nIH0gZnJvbSAnLi4vbW9kZWwvZHJhd2luZyc7XHJcbmltcG9ydCB7IE1haW5XaW5kb3cgfSBmcm9tICcuLi92aWV3L21haW4td2luZG93JztcclxuXHJcbi8vIFNpbmdsZXRvbiA9PiBJbW11dGFibGVcclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXBwO1xyXG5cclxuICAgIHByaXZhdGUgZHJhd2luZzogRHJhd2luZztcclxuICAgIHByaXZhdGUgbWFpbldpbmRvdzogTWFpbldpbmRvdztcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRyYXdpbmcgPSBuZXcgRHJhd2luZygpO1xyXG4gICAgICAgIHRoaXMubWFpbldpbmRvdyA9IG5ldyBNYWluV2luZG93KCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gJ0dyYXBoaWNzIEVkaXRvciB2MC42JztcclxuICAgIH1cclxuXHJcbiAgICAvLyBsYXp5IGluaXRpYWxpemF0aW9uIChwcmVmZXJyZWQpXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogQXBwIHtcclxuICAgICAgICBpZiAoIEFwcC5pbnN0YW5jZSApIHtcclxuICAgICAgICAgICAgLy8gTk9PUFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgQXBwLmluc3RhbmNlID0gbmV3IEFwcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEFwcC5pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBydW4oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlXHJcbiAgICAgICAgICAgIC5hZGRUZXN0RmlndXJlcygpO1xyXG5cclxuICAgICAgICB0aGlzLm1haW5XaW5kb3dcclxuICAgICAgICAgICAgLmluaXQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBhaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnJvbSBtb2RlbCB0byB2aWV3IFxyXG4gICAgcmVwYWludCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1haW5XaW5kb3dcclxuICAgICAgICAgICAgLnJlcGFpbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmcm9tIHZpZXcgdG8gbW9kZWxcclxuICAgIHBhaW50KFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmRyYXdpbmdcclxuICAgICAgICAgICAgLnBhaW50KFxyXG4gICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTkVXXHJcbiAgICBzZWxlY3QoIFxyXG4gICAgICAgIGV2RG93bjogTW91c2VFdmVudCxcclxuICAgICAgICBldlVwPzogTW91c2VFdmVudCApOiB2b2lkIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmRyYXdpbmdcclxuICAgICAgICAgICAgLnNlbGVjdChcclxuICAgICAgICAgICAgICAgIGV2RG93bixcclxuICAgICAgICAgICAgICAgIGV2VXBcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tICcuL2NvbnRyb2xsZXIvYXBwJztcclxuXHJcbmNvbnN0IGFwcCA9IEFwcC5nZXRJbnN0YW5jZSgpO1xyXG5hcHAucnVuKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhcHA7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=