!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o=function(){function t(t,e,n){this.position=t,this.size=e,this.color=n,this._selected=!1}return Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},enumerable:!1,configurable:!0}),t.colorAsString=function(t){return"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"},t}(),r=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}return r(e,t),e.prototype.paint=function(t){t.strokeStyle=o.colorAsString(this.color),t.beginPath(),t.moveTo(this.position.x,this.position.y),t.lineTo(this.position.x+this.size.w,this.position.y+this.size.h),t.stroke()},e}(o),s=function(){function t(){this.figures=[],this.modified=!1,this.name=null}return t.prototype.paint=function(t){this.figures.forEach((function(e){return e.paint(t)}))},t.prototype.addTestFigures=function(){var t=new u({x:10,y:10},{w:300,h:100},{r:255,g:0,b:0,a:255});this.figures.push(t);var e=new u({x:10,y:10},{w:300,h:200},{r:0,g:255,b:0,a:255});this.figures.push(e);var n=new u({x:10,y:10},{w:300,h:300},{r:0,g:0,b:255,a:255});this.figures.push(n)},t}(),c=function(){function t(){this.canvas=new a}return t.prototype.getContext=function(){return this.canvas.getContext()},t.prototype.repaint=function(){this.canvas.repaint()},t}(),a=function(){function t(){this.htmlElement=document.createElement("canvas"),document.body.appendChild(this.htmlElement),this.htmlElement.width=t.PAGE_WIDTH,this.htmlElement.height=t.PAGE_HEIGHT,this.htmlElement.style.backgroundColor="#FAFAFA",this.ctx=this.htmlElement.getContext("2d")}return t.prototype.getContext=function(){return this.ctx},Object.defineProperty(t.prototype,"width",{get:function(){return this.htmlElement.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.htmlElement.height},enumerable:!1,configurable:!0}),t.prototype.repaint=function(){this.drawGrid(this.ctx),h.getInstance().paint(this.ctx)},t.prototype.clear=function(t){t.fillStyle="#FAFAFA",t.fillRect(0,0,this.width,this.height)},t.prototype.drawGrid=function(e){if(e){this.clear(e),e.lineWidth=1,e.strokeStyle=t.GRID_COLOR;for(var n=this.width/t.GRID_SIZE,i=this.height/t.GRID_SIZE,o=1;o<n;o++)e.beginPath(),e.moveTo(o*t.GRID_SIZE,0),e.lineTo(o*t.GRID_SIZE,t.PAGE_HEIGHT),e.stroke();for(var r=1;r<i;r++)e.beginPath(),e.moveTo(0,r*t.GRID_SIZE),e.lineTo(t.PAGE_WIDTH,r*t.GRID_SIZE),e.stroke()}},t.PAGE_WIDTH=2e3,t.PAGE_HEIGHT=2e3,t.GRID_SIZE=100,t.GRID_COLOR="#DDD0DD",t}(),h=function(){function t(){this.drawing=new s,this.mainWindow=new c,document.title="Graphics Editor v0.2"}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.getContext=function(){return this.mainWindow.getContext()},t.prototype.run=function(){this.drawing.addTestFigures(),this.repaint()},t.prototype.repaint=function(){this.mainWindow.repaint()},t.prototype.paint=function(t){this.drawing.paint(t)},t}(),f=h.getInstance();f.run();e.default=f}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2ZpZ3VyZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvbGluZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvZHJhd2luZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9tYWluLXdpbmRvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlci9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicG9zaXRpb24iLCJzaXplIiwiY29sb3IiLCJfc2VsZWN0ZWQiLCJ0aGlzIiwiY29sb3JBc1N0cmluZyIsImciLCJiIiwiYSIsInBhaW50IiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJGaWd1cmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJ4IiwieSIsImxpbmVUbyIsInciLCJoIiwic3Ryb2tlIiwiZmlndXJlcyIsIm1vZGlmaWVkIiwiZm9yRWFjaCIsImYiLCJhZGRUZXN0RmlndXJlcyIsInJlZExpbmUiLCJwdXNoIiwiZ3JlZW5MaW5lIiwiYmx1ZUxpbmUiLCJjYW52YXMiLCJnZXRDb250ZXh0IiwicmVwYWludCIsImh0bWxFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwid2lkdGgiLCJDYW52YXMiLCJQQUdFX1dJRFRIIiwiaGVpZ2h0IiwiUEFHRV9IRUlHSFQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImRyYXdHcmlkIiwiZ2V0SW5zdGFuY2UiLCJjbGVhciIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwibGluZVdpZHRoIiwiR1JJRF9DT0xPUiIsIm51bVZlcnRpY2FscyIsIkdSSURfU0laRSIsIm51bUhvcml6b250YWxzIiwidiIsImRyYXdpbmciLCJtYWluV2luZG93IiwiTWFpbldpbmRvdyIsInRpdGxlIiwiQXBwIiwiaW5zdGFuY2UiLCJydW4iLCJhcHAiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFP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QUFjRyxJQUN2QzdDLEVBQUlHLFlBQ0pILEVBQUlJLE9BQ0F5QyxFQUFJaEIsRUFBT2MsVUFDWCxHQUVKM0MsRUFBSU8sT0FDQXNDLEVBQUloQixFQUFPYyxVQUNYZCxFQUFPRyxhQUVYaEMsRUFBSVUsU0FJUixJQUFNLElBQUlELEVBQVksRUFBR0EsRUFBSW1DLEVBQWdCbkMsSUFDekNULEVBQUlHLFlBQ0pILEVBQUlJLE9BQ0EsRUFDQUssRUFBSW9CLEVBQU9jLFdBRWYzQyxFQUFJTyxPQUNBc0IsRUFBT0MsV0FDUHJCLEVBQUlvQixFQUFPYyxXQUVmM0MsRUFBSVUsV0FqR0EsRUFBQW9CLFdBQXFCLElBQ3JCLEVBQUFFLFlBQXNCLElBRXRCLEVBQUFXLFVBQW9CLElBQ3BCLEVBQUFGLFdBQXFCLFVBaUd6QyxFQTFHQSxHQ3JCQSxhQU1JLGFBQ0kvQyxLQUFLb0QsUUFBVSxJQUFJLEVBQ25CcEQsS0FBS3FELFdBQWEsSUFBSUMsRUFFdEJ4QixTQUFTeUIsTUFBUSx1QkF5Q3pCLE9BckNXLEVBQUFiLFlBQVAsV0FRSSxPQVBLYyxFQUFJQyxXQUlMRCxFQUFJQyxTQUFXLElBQUlELEdBR2hCQSxFQUFJQyxVQUdmLFlBQUE5QixXQUFBLFdBQ0ksT0FBTzNCLEtBQUtxRCxXQUNQMUIsY0FHVCxZQUFBK0IsSUFBQSxXQUNJMUQsS0FBS29ELFFBQ0EvQixpQkFFTHJCLEtBQUs0QixXQUdULFlBQUFBLFFBQUEsV0FDSTVCLEtBQUtxRCxXQUNBekIsV0FJVCxZQUFBdkIsTUFBQSxTQUNJQyxHQUVBTixLQUFLb0QsUUFDQS9DLE1BQ0dDLElBR2hCLEVBbkRBLEdDRE1xRCxFQUFNLEVBQUlqQixjQUNoQmlCLEVBQUlELE1BRVciLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGludGVyZmFjZSBQb3NpdGlvbiB7XHJcbiAgICB4OiBudW1iZXI7XHJcbiAgICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRGltZW5zaW9uIHtcclxuICAgIHc6IG51bWJlcjtcclxuICAgIGg6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb2xvciB7XHJcbiAgICByOiBudW1iZXI7XHJcbiAgICBnOiBudW1iZXI7XHJcbiAgICBiOiBudW1iZXI7XHJcbiAgICBhOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGaWd1cmUge1xyXG5cclxuICAgIC8vIHB1YmxpYyBpbnRlcmZhY2UgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgYWJzdHJhY3QgcGFpbnQoIFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJvdGVjdGVkIHBvc2l0aW9uOiBQb3NpdGlvbixcclxuICAgICAgICBwcm90ZWN0ZWQgc2l6ZTogRGltZW5zaW9uLFxyXG4gICAgICAgIHByb3RlY3RlZCBjb2xvcjogQ29sb3IgKSB7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHNlbGVjdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBub24tcHVibGljIG1lbWJlcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHByb3RlY3RlZCBfc2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGNvbG9yQXNTdHJpbmcoICAgICAgICAvLyBORVdcclxuICAgICAgICBjb2xvcjogQ29sb3IgKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgcmV0dXJuICdyZ2JhKCdcclxuICAgICAgICAgICAgKyBjb2xvci5yXHJcbiAgICAgICAgICAgICsgJywnXHJcbiAgICAgICAgICAgICsgY29sb3IuZ1xyXG4gICAgICAgICAgICArICcsJ1xyXG4gICAgICAgICAgICArIGNvbG9yLmJcclxuICAgICAgICAgICAgKyAnLCdcclxuICAgICAgICAgICAgKyBjb2xvci5hXHJcbiAgICAgICAgICAgICsgJyknO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFxuICAgIENvbG9yLCBcbiAgICBEaW1lbnNpb24sIFxuICAgIEZpZ3VyZSxcbiAgICBQb3NpdGlvblxufSBmcm9tICcuL2ZpZ3VyZSc7XG5cbmV4cG9ydCBjbGFzcyBMaW5lIFxuICAgIGV4dGVuZHMgRmlndXJlIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwb3NpdGlvbjogUG9zaXRpb24sXG4gICAgICAgIHNpemU6IERpbWVuc2lvbixcbiAgICAgICAgY29sb3I6IENvbG9yICkge1xuXG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgICBzaXplLFxuICAgICAgICAgICAgY29sb3JcbiAgICAgICAgKTtcbiAgICB9XG4gICAgICAgIFxuICAgIHBhaW50KCBcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gRmlndXJlLmNvbG9yQXNTdHJpbmcoXG4gICAgICAgICAgICB0aGlzLmNvbG9yXG4gICAgICAgICk7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubW92ZVRvKFxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54LCBcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueVxuICAgICAgICApO1xuICAgICAgICBjdHgubGluZVRvKFxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi54ICsgdGhpcy5zaXplLncsIFxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ICsgdGhpcy5zaXplLmhcbiAgICAgICAgKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBcclxuICAgIEZpZ3VyZSwgXHJcbn0gZnJvbSAnLi9maWd1cmUnO1xyXG5cclxuaW1wb3J0IHsgXHJcbiAgICBMaW5lIFxyXG59IGZyb20gJy4vbGluZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgRHJhd2luZyB7XHJcbiAgICBwcml2YXRlIGZpZ3VyZXM6IEZpZ3VyZVtdID0gW1xyXG4gICAgXTtcclxuXHJcbiAgICBwcml2YXRlIG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIG5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIHBhaW50KFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmZpZ3VyZXMuZm9yRWFjaCggXHJcbiAgICAgICAgICAgIChmOiBGaWd1cmUpID0+IGYucGFpbnQoIGN0eCApIFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkVGVzdEZpZ3VyZXMoKTogdm9pZCB7ICAgICAgICAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgY29uc3QgcmVkTGluZTogTGluZSA9IG5ldyBMaW5lKFxyXG4gICAgICAgICAgICB7IHg6IDEwLCB5OiAxMCB9LFxyXG4gICAgICAgICAgICB7IHc6IDMwMCwgaDogMTAwIH0sXHJcbiAgICAgICAgICAgIHsgcjogMjU1LCBnOiAwLCBiOiAwLCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgcmVkTGluZVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBncmVlbkxpbmU6IExpbmUgPSBuZXcgTGluZShcclxuICAgICAgICAgICAgeyB4OiAxMCwgeTogMTAgfSxcclxuICAgICAgICAgICAgeyB3OiAzMDAsIGg6IDIwMCB9LFxyXG4gICAgICAgICAgICB7IHI6IDAsIGc6IDI1NSwgYjogMCwgYTogMjU1IH1cclxuICAgICAgICApO1xyXG4gICAgICAgIHRoaXMuZmlndXJlc1xyXG4gICAgICAgICAgICAucHVzaChcclxuICAgICAgICAgICAgICAgIGdyZWVuTGluZVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBibHVlTGluZTogTGluZSA9IG5ldyBMaW5lKFxyXG4gICAgICAgICAgICB7IHg6IDEwLCB5OiAxMCB9LFxyXG4gICAgICAgICAgICB7IHc6IDMwMCwgaDogMzAwIH0sXHJcbiAgICAgICAgICAgIHsgcjogMCwgZzogMCwgYjogMjU1LCBhOiAyNTUgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgdGhpcy5maWd1cmVzXHJcbiAgICAgICAgICAgIC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgYmx1ZUxpbmVcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBcclxuICAgIEFwcCBcclxufSBmcm9tICcuLi9jb250cm9sbGVyL2FwcCc7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFpbldpbmRvdyB7XHJcbiAgICAvLyBwcml2YXRlIG1lbnU6IE1lbnVIZWxwZXI7XHJcbiAgICBwcml2YXRlIGNhbnZhczogQ2FudmFzO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gbmV3IENhbnZhcygpO1xyXG4gICAgfVxyXG4gICAgZ2V0Q29udGV4dCgpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc1xyXG4gICAgICAgICAgICAuZ2V0Q29udGV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGFpbnQoKTogdm9pZCB7ICAgICAgICAgICAvLyBORVdcclxuICAgICAgICB0aGlzLmNhbnZhc1xyXG4gICAgICAgICAgICAucmVwYWludCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBtb2R1bGUgcHJpdmF0ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuY2xhc3MgQ2FudmFzIHtcclxuXHJcbiAgICBwcml2YXRlIGh0bWxFbGVtZW50OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBQQUdFX1dJRFRIOiBudW1iZXIgPSAyMDAwO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IFBBR0VfSEVJR0hUOiBudW1iZXIgPSAyMDAwO1xyXG5cclxuICAgIHN0YXRpYyByZWFkb25seSBHUklEX1NJWkU6IG51bWJlciA9IDEwMDtcclxuICAgIHN0YXRpYyByZWFkb25seSBHUklEX0NPTE9SOiBzdHJpbmcgPSAnI0RERDBERCc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXHJcbiAgICAgICAgICAgICdjYW52YXMnXHJcbiAgICAgICAgKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5XHJcbiAgICAgICAgICAgIC5hcHBlbmRDaGlsZCggXHJcbiAgICAgICAgICAgICAgICB0aGlzLmh0bWxFbGVtZW50IFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LndpZHRoID0gQ2FudmFzLlBBR0VfV0lEVEg7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudC5oZWlnaHQgPSBDYW52YXMuUEFHRV9IRUlHSFQ7XHJcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI0ZBRkFGQSc7XHJcblxyXG4gICAgICAgIHRoaXMuY3R4ID0gdGhpcy5odG1sRWxlbWVudFxyXG4gICAgICAgICAgICAuZ2V0Q29udGV4dChcclxuICAgICAgICAgICAgICAgICcyZCdcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3R4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgd2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5odG1sRWxlbWVudC53aWR0aDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0bWxFbGVtZW50LmhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICByZXBhaW50KCk6IHZvaWQgeyAgICAgICAgICAgLy8gTkVXXHJcbiAgICAgICAgdGhpcy5kcmF3R3JpZChcclxuICAgICAgICAgICAgdGhpcy5jdHhcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBBcHAuZ2V0SW5zdGFuY2UoKVxyXG4gICAgICAgICAgICAucGFpbnQoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eFxyXG4gICAgICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHByaXZhdGUgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgICBwcml2YXRlIGNsZWFyKFxyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZBRkFGQSc7XHJcbiAgICAgICAgY3R4LmZpbGxSZWN0KCAwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCApO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhd0dyaWQoXHJcbiAgICAgICAgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCBudWxsICk6IHZvaWQge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICBpZiAoIGN0eCApIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhcihcclxuICAgICAgICAgICAgICAgIGN0eFxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IENhbnZhcy5HUklEX0NPTE9SO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogdXNlIGRvY3VtZW50IHNpemVcclxuICAgICAgICAgICAgY29uc3QgbnVtVmVydGljYWxzOiBudW1iZXIgPSB0aGlzLndpZHRoIC8gQ2FudmFzLkdSSURfU0laRTtcclxuICAgICAgICAgICAgY29uc3QgbnVtSG9yaXpvbnRhbHM6IG51bWJlciA9IHRoaXMuaGVpZ2h0IC8gQ2FudmFzLkdSSURfU0laRTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZlcnRpY2Fsc1xyXG4gICAgICAgICAgICBmb3IgKCBsZXQgdjogbnVtYmVyID0gMTsgdiA8IG51bVZlcnRpY2FsczsgdisrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgdiAqIENhbnZhcy5HUklEX1NJWkUsIFxyXG4gICAgICAgICAgICAgICAgICAgIDAgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICB2ICogQ2FudmFzLkdSSURfU0laRSwgXHJcbiAgICAgICAgICAgICAgICAgICAgQ2FudmFzLlBBR0VfSEVJR0hUIFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaG9yaXpvbnRhbHNcclxuICAgICAgICAgICAgZm9yICggbGV0IGg6IG51bWJlciA9IDE7IGggPCBudW1Ib3Jpem9udGFsczsgaCsrICkge1xyXG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyggXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICBDYW52YXMuUEFHRV9XSURUSCwgXHJcbiAgICAgICAgICAgICAgICAgICAgaCAqIENhbnZhcy5HUklEX1NJWkUgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IERyYXdpbmcgfSBmcm9tICcuLi9tb2RlbC9kcmF3aW5nJztcclxuaW1wb3J0IHsgTWFpbldpbmRvdyB9IGZyb20gJy4uL3ZpZXcvbWFpbi13aW5kb3cnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQXBwO1xyXG5cclxuICAgIHByaXZhdGUgZHJhd2luZzogRHJhd2luZztcclxuICAgIHByaXZhdGUgbWFpbldpbmRvdzogTWFpbldpbmRvdztcclxuICAgIFxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmRyYXdpbmcgPSBuZXcgRHJhd2luZygpO1xyXG4gICAgICAgIHRoaXMubWFpbldpbmRvdyA9IG5ldyBNYWluV2luZG93KCk7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gJ0dyYXBoaWNzIEVkaXRvciB2MC4yJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBsYXp5IGxvYWRpbmcgKHByZWZlcnJlZClcclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBcHAge1xyXG4gICAgICAgIGlmICggQXBwLmluc3RhbmNlICkge1xyXG4gICAgICAgICAgICAvLyBOT09QXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBBcHAuaW5zdGFuY2UgPSBuZXcgQXBwKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gQXBwLmluc3RhbmNlO1xyXG4gICAgXHJcbiAgICB9XHJcbiAgICBnZXRDb250ZXh0KCk6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFpbldpbmRvd1xyXG4gICAgICAgICAgICAuZ2V0Q29udGV4dCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBydW4oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nICAgICAgICAgICAgLy8gTkVXIC8vIFRPRE86IHJlbW92ZVxyXG4gICAgICAgICAgICAuYWRkVGVzdEZpZ3VyZXMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBhaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwYWludCgpOiB2b2lkIHsgICAgICAgICAgIC8vIE5FV1xyXG4gICAgICAgIHRoaXMubWFpbldpbmRvd1xyXG4gICAgICAgICAgICAucmVwYWludCgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZyb20gdmlldyB0byBtb2RlbFxyXG4gICAgcGFpbnQoICAgICAgICAgICAgICAgICAgICAgIC8vIE5FV1xyXG4gICAgICAgIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICk6IHZvaWQge1xyXG5cclxuICAgICAgICB0aGlzLmRyYXdpbmdcclxuICAgICAgICAgICAgLnBhaW50KFxyXG4gICAgICAgICAgICAgICAgY3R4XHJcbiAgICAgICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSAnLi9jb250cm9sbGVyL2FwcCc7XHJcblxyXG5jb25zdCBhcHAgPSBBcHAuZ2V0SW5zdGFuY2UoKTtcclxuYXBwLnJ1bigpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9